(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _r={exports:{}},Xr;function hn(){return Xr||(Xr=1,(function(e){function a(t,s){if(s&&s.documentElement)t=s,s=arguments[2];else if(!t||!t.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(s=s||{},this._doc=t,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._metadata={},this._debug=!!s.debug,this._maxElemsToParse=s.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=s.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=s.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(s.classesToPreserve||[]),this._keepClasses=!!s.keepClasses,this._serializer=s.serializer||function(i){return i.innerHTML},this._disableJSONLD=!!s.disableJSONLD,this._allowedVideoRegex=s.allowedVideoRegex||this.REGEXPS.videos,this._linkDensityModifier=s.linkDensityModifier||0,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let i=function(n){if(n.nodeType==n.TEXT_NODE)return`${n.nodeName} ("${n.textContent}")`;let l=Array.from(n.attributes||[],function(r){return`${r.name}="${r.value}"`}).join(" ");return`<${n.localName} ${l}>`};this.log=function(){if(typeof console<"u"){let l=Array.from(arguments,r=>r&&r.nodeType==this.ELEMENT_NODE?i(r):r);l.unshift("Reader: (Readability)"),console.log(...l)}else if(typeof dump<"u"){var n=Array.prototype.map.call(arguments,function(l){return l&&l.nodeName?i(l):l}).join(" ");dump("Reader: (Readability) "+n+`
`)}}}else this.log=function(){}}a.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|footer|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/,adWords:/^(ad(vertising|vertisement)?|pub(licité)?|werb(ung)?|广告|Реклама|Anuncio)$/iu,loadingWords:/^((loading|正在加载|Загрузка|chargement|cargando)(…|\.\.\.)?)$/iu},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P","OL","UL"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent(t){this._fixRelativeUris(t),this._simplifyNestedElements(t),this._keepClasses||this._cleanClasses(t)},_removeNodes(t,s){if(this._docJSDOMParser&&t._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var i=t.length-1;i>=0;i--){var n=t[i],l=n.parentNode;l&&(!s||s.call(this,n,i,t))&&l.removeChild(n)}},_replaceNodeTags(t,s){if(this._docJSDOMParser&&t._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const i of t)this._setNodeTag(i,s)},_forEachNode(t,s){Array.prototype.forEach.call(t,s,this)},_findNode(t,s){return Array.prototype.find.call(t,s,this)},_someNode(t,s){return Array.prototype.some.call(t,s,this)},_everyNode(t,s){return Array.prototype.every.call(t,s,this)},_getAllNodesWithTag(t,s){return t.querySelectorAll?t.querySelectorAll(s.join(",")):[].concat.apply([],s.map(function(i){var n=t.getElementsByTagName(i);return Array.isArray(n)?n:Array.from(n)}))},_cleanClasses(t){var s=this._classesToPreserve,i=(t.getAttribute("class")||"").split(/\s+/).filter(n=>s.includes(n)).join(" ");for(i?t.setAttribute("class",i):t.removeAttribute("class"),t=t.firstElementChild;t;t=t.nextElementSibling)this._cleanClasses(t)},_isUrl(t){try{return new URL(t),!0}catch{return!1}},_fixRelativeUris(t){var s=this._doc.baseURI,i=this._doc.documentURI;function n(o){if(s==i&&o.charAt(0)=="#")return o;try{return new URL(o,s).href}catch{}return o}var l=this._getAllNodesWithTag(t,["a"]);this._forEachNode(l,function(o){var f=o.getAttribute("href");if(f)if(f.indexOf("javascript:")===0)if(o.childNodes.length===1&&o.childNodes[0].nodeType===this.TEXT_NODE){var m=this._doc.createTextNode(o.textContent);o.parentNode.replaceChild(m,o)}else{for(var p=this._doc.createElement("span");o.firstChild;)p.appendChild(o.firstChild);o.parentNode.replaceChild(p,o)}else o.setAttribute("href",n(f))});var r=this._getAllNodesWithTag(t,["img","picture","figure","video","audio","source"]);this._forEachNode(r,function(o){var f=o.getAttribute("src"),m=o.getAttribute("poster"),p=o.getAttribute("srcset");if(f&&o.setAttribute("src",n(f)),m&&o.setAttribute("poster",n(m)),p){var _=p.replace(this.REGEXPS.srcsetUrl,function(h,v,d,b){return n(v)+(d||"")+b});o.setAttribute("srcset",_)}})},_simplifyNestedElements(t){for(var s=t;s;){if(s.parentNode&&["DIV","SECTION"].includes(s.tagName)&&!(s.id&&s.id.startsWith("readability"))){if(this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}else if(this._hasSingleTagInsideElement(s,"DIV")||this._hasSingleTagInsideElement(s,"SECTION")){for(var i=s.children[0],n=0;n<s.attributes.length;n++)i.setAttributeNode(s.attributes[n].cloneNode());s.parentNode.replaceChild(i,s),s=i;continue}}s=this._getNextNode(s)}},_getArticleTitle(){var t=this._doc,s="",i="";try{s=i=t.title.trim(),typeof s!="string"&&(s=i=this._getInnerText(t.getElementsByTagName("title")[0]))}catch{}var n=!1;function l(_){return _.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(s)){n=/ [\\\/>»] /.test(s);let _=Array.from(i.matchAll(/ [\|\-\\\/>»] /gi));s=i.substring(0,_.pop().index),l(s)<3&&(s=i.replace(/^[^\|\-\\\/>»]*[\|\-\\\/>»]/gi,""))}else if(s.includes(": ")){var r=this._getAllNodesWithTag(t,["h1","h2"]),o=s.trim(),f=this._someNode(r,function(_){return _.textContent.trim()===o});f||(s=i.substring(i.lastIndexOf(":")+1),l(s)<3?s=i.substring(i.indexOf(":")+1):l(i.substr(0,i.indexOf(":")))>5&&(s=i))}else if(s.length>150||s.length<15){var m=t.getElementsByTagName("h1");m.length===1&&(s=this._getInnerText(m[0]))}s=s.trim().replace(this.REGEXPS.normalize," ");var p=l(s);return p<=4&&(!n||p!=l(i.replace(/[\|\-\\\/>»]+/g,""))-1)&&(s=i),s},_prepDocument(){var t=this._doc;this._removeNodes(this._getAllNodesWithTag(t,["style"])),t.body&&this._replaceBrs(t.body),this._replaceNodeTags(this._getAllNodesWithTag(t,["font"]),"SPAN")},_nextNode(t){for(var s=t;s&&s.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(s.textContent);)s=s.nextSibling;return s},_replaceBrs(t){this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(s){for(var i=s.nextSibling,n=!1;(i=this._nextNode(i))&&i.tagName=="BR";){n=!0;var l=i.nextSibling;i.remove(),i=l}if(n){var r=this._doc.createElement("p");for(s.parentNode.replaceChild(r,s),i=r.nextSibling;i;){if(i.tagName=="BR"){var o=this._nextNode(i.nextSibling);if(o&&o.tagName=="BR")break}if(!this._isPhrasingContent(i))break;var f=i.nextSibling;r.appendChild(i),i=f}for(;r.lastChild&&this._isWhitespace(r.lastChild);)r.lastChild.remove();r.parentNode.tagName==="P"&&this._setNodeTag(r.parentNode,"DIV")}})},_setNodeTag(t,s){if(this.log("_setNodeTag",t,s),this._docJSDOMParser)return t.localName=s.toLowerCase(),t.tagName=s.toUpperCase(),t;for(var i=t.ownerDocument.createElement(s);t.firstChild;)i.appendChild(t.firstChild);t.parentNode.replaceChild(i,t),t.readability&&(i.readability=t.readability);for(var n=0;n<t.attributes.length;n++)i.setAttributeNode(t.attributes[n].cloneNode());return i},_prepArticle(t){this._cleanStyles(t),this._markDataTables(t),this._fixLazyImages(t),this._cleanConditionally(t,"form"),this._cleanConditionally(t,"fieldset"),this._clean(t,"object"),this._clean(t,"embed"),this._clean(t,"footer"),this._clean(t,"link"),this._clean(t,"aside");var s=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(t.children,function(i){this._cleanMatchedNodes(i,function(n,l){return this.REGEXPS.shareElements.test(l)&&n.textContent.length<s})}),this._clean(t,"iframe"),this._clean(t,"input"),this._clean(t,"textarea"),this._clean(t,"select"),this._clean(t,"button"),this._cleanHeaders(t),this._cleanConditionally(t,"table"),this._cleanConditionally(t,"ul"),this._cleanConditionally(t,"div"),this._replaceNodeTags(this._getAllNodesWithTag(t,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(t,["p"]),function(i){var n=this._getAllNodesWithTag(i,["img","embed","object","iframe"]).length;return n===0&&!this._getInnerText(i,!1)}),this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(i){var n=this._nextNode(i.nextSibling);n&&n.tagName=="P"&&i.remove()}),this._forEachNode(this._getAllNodesWithTag(t,["table"]),function(i){var n=this._hasSingleTagInsideElement(i,"TBODY")?i.firstElementChild:i;if(this._hasSingleTagInsideElement(n,"TR")){var l=n.firstElementChild;if(this._hasSingleTagInsideElement(l,"TD")){var r=l.firstElementChild;r=this._setNodeTag(r,this._everyNode(r.childNodes,this._isPhrasingContent)?"P":"DIV"),i.parentNode.replaceChild(r,i)}}})},_initializeNode(t){switch(t.readability={contentScore:0},t.tagName){case"DIV":t.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":t.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":t.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":t.readability.contentScore-=5;break}t.readability.contentScore+=this._getClassWeight(t)},_removeAndGetNext(t){var s=this._getNextNode(t,!0);return t.remove(),s},_getNextNode(t,s){if(!s&&t.firstElementChild)return t.firstElementChild;if(t.nextElementSibling)return t.nextElementSibling;do t=t.parentNode;while(t&&!t.nextElementSibling);return t&&t.nextElementSibling},_textSimilarity(t,s){var i=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),n=s.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!i.length||!n.length)return 0;var l=n.filter(o=>!i.includes(o)),r=l.join(" ").length/n.join(" ").length;return 1-r},_isValidByline(t,s){var i=t.getAttribute("rel"),n=t.getAttribute("itemprop"),l=t.textContent.trim().length;return(i==="author"||n&&n.includes("author")||this.REGEXPS.byline.test(s))&&!!l&&l<100},_getNodeAncestors(t,s){s=s||0;for(var i=0,n=[];t.parentNode&&(n.push(t.parentNode),!(s&&++i===s));)t=t.parentNode;return n},_grabArticle(t){this.log("**** grabArticle ****");var s=this._doc,i=t!==null;if(t=t||this._doc.body,!t)return this.log("No body found in document. Abort."),null;for(var n=t.innerHTML;;){this.log("Starting grabArticle loop");var l=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),r=[],o=this._doc.documentElement;let L=!0;for(;o;){o.tagName==="HTML"&&(this._articleLang=o.getAttribute("lang"));var f=o.className+" "+o.id;if(!this._isProbablyVisible(o)){this.log("Removing hidden node - "+f),o=this._removeAndGetNext(o);continue}if(o.getAttribute("aria-modal")=="true"&&o.getAttribute("role")=="dialog"){o=this._removeAndGetNext(o);continue}if(!this._articleByline&&!this._metadata.byline&&this._isValidByline(o,f)){for(var m=this._getNextNode(o,!0),p=this._getNextNode(o),_=null;p&&p!=m;){var h=p.getAttribute("itemprop");if(h&&h.includes("name")){_=p;break}else p=this._getNextNode(p)}this._articleByline=(_??o).textContent.trim(),o=this._removeAndGetNext(o);continue}if(L&&this._headerDuplicatesTitle(o)){this.log("Removing header: ",o.textContent.trim(),this._articleTitle.trim()),L=!1,o=this._removeAndGetNext(o);continue}if(l){if(this.REGEXPS.unlikelyCandidates.test(f)&&!this.REGEXPS.okMaybeItsACandidate.test(f)&&!this._hasAncestorTag(o,"table")&&!this._hasAncestorTag(o,"code")&&o.tagName!=="BODY"&&o.tagName!=="A"){this.log("Removing unlikely candidate - "+f),o=this._removeAndGetNext(o);continue}if(this.UNLIKELY_ROLES.includes(o.getAttribute("role"))){this.log("Removing content with role "+o.getAttribute("role")+" - "+f),o=this._removeAndGetNext(o);continue}}if((o.tagName==="DIV"||o.tagName==="SECTION"||o.tagName==="HEADER"||o.tagName==="H1"||o.tagName==="H2"||o.tagName==="H3"||o.tagName==="H4"||o.tagName==="H5"||o.tagName==="H6")&&this._isElementWithoutContent(o)){o=this._removeAndGetNext(o);continue}if(this.DEFAULT_TAGS_TO_SCORE.includes(o.tagName)&&r.push(o),o.tagName==="DIV"){for(var v=null,d=o.firstChild;d;){var b=d.nextSibling;if(this._isPhrasingContent(d))v!==null?v.appendChild(d):this._isWhitespace(d)||(v=s.createElement("p"),o.replaceChild(v,d),v.appendChild(d));else if(v!==null){for(;v.lastChild&&this._isWhitespace(v.lastChild);)v.lastChild.remove();v=null}d=b}if(this._hasSingleTagInsideElement(o,"P")&&this._getLinkDensity(o)<.25){var g=o.children[0];o.parentNode.replaceChild(g,o),o=g,r.push(o)}else this._hasChildBlockElement(o)||(o=this._setNodeTag(o,"P"),r.push(o))}o=this._getNextNode(o)}var w=[];this._forEachNode(r,function(x){if(!(!x.parentNode||typeof x.parentNode.tagName>"u")){var y=this._getInnerText(x);if(!(y.length<25)){var N=this._getNodeAncestors(x,5);if(N.length!==0){var W=0;W+=1,W+=y.split(this.REGEXPS.commas).length,W+=Math.min(Math.floor(y.length/100),3),this._forEachNode(N,function(H,I){if(!(!H.tagName||!H.parentNode||typeof H.parentNode.tagName>"u")){if(typeof H.readability>"u"&&(this._initializeNode(H),w.push(H)),I===0)var q=1;else I===1?q=2:q=I*3;H.readability.contentScore+=W/q}})}}}});for(var k=[],A=0,S=w.length;A<S;A+=1){var z=w[A],O=z.readability.contentScore*(1-this._getLinkDensity(z));z.readability.contentScore=O,this.log("Candidate:",z,"with score "+O);for(var U=0;U<this._nbTopCandidates;U++){var R=k[U];if(!R||O>R.readability.contentScore){k.splice(U,0,z),k.length>this._nbTopCandidates&&k.pop();break}}}var B=k[0]||null,K=!1,E;if(B===null||B.tagName==="BODY"){for(B=s.createElement("DIV"),K=!0;t.firstChild;)this.log("Moving child out:",t.firstChild),B.appendChild(t.firstChild);t.appendChild(B),this._initializeNode(B)}else if(B){for(var D=[],c=1;c<k.length;c++)k[c].readability.contentScore/B.readability.contentScore>=.75&&D.push(this._getNodeAncestors(k[c]));var j=3;if(D.length>=j)for(E=B.parentNode;E.tagName!=="BODY";){for(var tt=0,F=0;F<D.length&&tt<j;F++)tt+=Number(D[F].includes(E));if(tt>=j){B=E;break}E=E.parentNode}B.readability||this._initializeNode(B),E=B.parentNode;for(var X=B.readability.contentScore,G=X/3;E.tagName!=="BODY";){if(!E.readability){E=E.parentNode;continue}var Y=E.readability.contentScore;if(Y<G)break;if(Y>X){B=E;break}X=E.readability.contentScore,E=E.parentNode}for(E=B.parentNode;E.tagName!="BODY"&&E.children.length==1;)B=E,E=B.parentNode;B.readability||this._initializeNode(B)}var T=s.createElement("DIV");i&&(T.id="readability-content");var C=Math.max(10,B.readability.contentScore*.2);E=B.parentNode;for(var Q=E.children,$=0,Z=Q.length;$<Z;$++){var rt=Q[$],ht=!1;if(this.log("Looking at sibling node:",rt,rt.readability?"with score "+rt.readability.contentScore:""),this.log("Sibling has score",rt.readability?rt.readability.contentScore:"Unknown"),rt===B)ht=!0;else{var it=0;if(rt.className===B.className&&B.className!==""&&(it+=B.readability.contentScore*.2),rt.readability&&rt.readability.contentScore+it>=C)ht=!0;else if(rt.nodeName==="P"){var nt=this._getLinkDensity(rt),ut=this._getInnerText(rt),at=ut.length;(at>80&&nt<.25||at<80&&at>0&&nt===0&&ut.search(/\.( |$)/)!==-1)&&(ht=!0)}}ht&&(this.log("Appending node:",rt),this.ALTER_TO_DIV_EXCEPTIONS.includes(rt.nodeName)||(this.log("Altering sibling:",rt,"to div."),rt=this._setNodeTag(rt,"DIV")),T.appendChild(rt),Q=E.children,$-=1,Z-=1)}if(this._debug&&this.log("Article content pre-prep: "+T.innerHTML),this._prepArticle(T),this._debug&&this.log("Article content post-prep: "+T.innerHTML),K)B.id="readability-page-1",B.className="page";else{var bt=s.createElement("DIV");for(bt.id="readability-page-1",bt.className="page";T.firstChild;)bt.appendChild(T.firstChild);T.appendChild(bt)}this._debug&&this.log("Article content after paging: "+T.innerHTML);var yt=!0,u=this._getInnerText(T,!0).length;if(u<this._charThreshold)if(yt=!1,t.innerHTML=n,this._attempts.push({articleContent:T,textLength:u}),this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS);else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES);else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY);else{if(this._attempts.sort(function(x,y){return y.textLength-x.textLength}),!this._attempts[0].textLength)return null;T=this._attempts[0].articleContent,yt=!0}if(yt){var M=[E,B].concat(this._getNodeAncestors(E));return this._someNode(M,function(x){if(!x.tagName)return!1;var y=x.getAttribute("dir");return y?(this._articleDir=y,!0):!1}),T}}},_unescapeHtmlEntities(t){if(!t)return t;var s=this.HTML_ESCAPE_MAP;return t.replace(/&(quot|amp|apos|lt|gt);/g,function(i,n){return s[n]}).replace(/&#(?:x([0-9a-f]+)|([0-9]+));/gi,function(i,n,l){var r=parseInt(n||l,n?16:10);return(r==0||r>1114111||r>=55296&&r<=57343)&&(r=65533),String.fromCodePoint(r)})},_getJSONLD(t){var s=this._getAllNodesWithTag(t,["script"]),i;return this._forEachNode(s,function(n){if(!i&&n.getAttribute("type")==="application/ld+json")try{var l=n.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),r=JSON.parse(l);if(Array.isArray(r)&&(r=r.find(h=>h["@type"]&&h["@type"].match(this.REGEXPS.jsonLdArticleTypes)),!r))return;var o=/^https?\:\/\/schema\.org\/?$/,f=typeof r["@context"]=="string"&&r["@context"].match(o)||typeof r["@context"]=="object"&&typeof r["@context"]["@vocab"]=="string"&&r["@context"]["@vocab"].match(o);if(!f||(!r["@type"]&&Array.isArray(r["@graph"])&&(r=r["@graph"].find(h=>(h["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes))),!r||!r["@type"]||!r["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(i={},typeof r.name=="string"&&typeof r.headline=="string"&&r.name!==r.headline){var m=this._getArticleTitle(),p=this._textSimilarity(r.name,m)>.75,_=this._textSimilarity(r.headline,m)>.75;_&&!p?i.title=r.headline:i.title=r.name}else typeof r.name=="string"?i.title=r.name.trim():typeof r.headline=="string"&&(i.title=r.headline.trim());r.author&&(typeof r.author.name=="string"?i.byline=r.author.name.trim():Array.isArray(r.author)&&r.author[0]&&typeof r.author[0].name=="string"&&(i.byline=r.author.filter(function(h){return h&&typeof h.name=="string"}).map(function(h){return h.name.trim()}).join(", "))),typeof r.description=="string"&&(i.excerpt=r.description.trim()),r.publisher&&typeof r.publisher.name=="string"&&(i.siteName=r.publisher.name.trim()),typeof r.datePublished=="string"&&(i.datePublished=r.datePublished.trim())}catch(h){this.log(h.message)}}),i||{}},_getArticleMetadata(t){var s={},i={},n=this._doc.getElementsByTagName("meta"),l=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,r=/^\s*(?:(dc|dcterm|og|twitter|parsely|weibo:(article|webpage))\s*[-\.:]\s*)?(author|creator|pub-date|description|title|site_name)\s*$/i;this._forEachNode(n,function(f){var m=f.getAttribute("name"),p=f.getAttribute("property"),_=f.getAttribute("content");if(_){var h=null,v=null;p&&(h=p.match(l),h&&(v=h[0].toLowerCase().replace(/\s/g,""),i[v]=_.trim())),!h&&m&&r.test(m)&&(v=m,_&&(v=v.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),i[v]=_.trim()))}}),s.title=t.title||i["dc:title"]||i["dcterm:title"]||i["og:title"]||i["weibo:article:title"]||i["weibo:webpage:title"]||i.title||i["twitter:title"]||i["parsely-title"],s.title||(s.title=this._getArticleTitle());const o=typeof i["article:author"]=="string"&&!this._isUrl(i["article:author"])?i["article:author"]:void 0;return s.byline=t.byline||i["dc:creator"]||i["dcterm:creator"]||i.author||i["parsely-author"]||o,s.excerpt=t.excerpt||i["dc:description"]||i["dcterm:description"]||i["og:description"]||i["weibo:article:description"]||i["weibo:webpage:description"]||i.description||i["twitter:description"],s.siteName=t.siteName||i["og:site_name"],s.publishedTime=t.datePublished||i["article:published_time"]||i["parsely-pub-date"]||null,s.title=this._unescapeHtmlEntities(s.title),s.byline=this._unescapeHtmlEntities(s.byline),s.excerpt=this._unescapeHtmlEntities(s.excerpt),s.siteName=this._unescapeHtmlEntities(s.siteName),s.publishedTime=this._unescapeHtmlEntities(s.publishedTime),s},_isSingleImage(t){for(;t;){if(t.tagName==="IMG")return!0;if(t.children.length!==1||t.textContent.trim()!=="")return!1;t=t.children[0]}return!1},_unwrapNoscriptImages(t){var s=Array.from(t.getElementsByTagName("img"));this._forEachNode(s,function(n){for(var l=0;l<n.attributes.length;l++){var r=n.attributes[l];switch(r.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(r.value))return}n.remove()});var i=Array.from(t.getElementsByTagName("noscript"));this._forEachNode(i,function(n){if(this._isSingleImage(n)){var l=t.createElement("div");l.innerHTML=n.innerHTML;var r=n.previousElementSibling;if(r&&this._isSingleImage(r)){var o=r;o.tagName!=="IMG"&&(o=r.getElementsByTagName("img")[0]);for(var f=l.getElementsByTagName("img")[0],m=0;m<o.attributes.length;m++){var p=o.attributes[m];if(p.value!==""&&(p.name==="src"||p.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(p.value))){if(f.getAttribute(p.name)===p.value)continue;var _=p.name;f.hasAttribute(_)&&(_="data-old-"+_),f.setAttribute(_,p.value)}}n.parentNode.replaceChild(l.firstElementChild,r)}}})},_removeScripts(t){this._removeNodes(this._getAllNodesWithTag(t,["script","noscript"]))},_hasSingleTagInsideElement(t,s){return t.children.length!=1||t.children[0].tagName!==s?!1:!this._someNode(t.childNodes,function(i){return i.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(i.textContent)})},_isElementWithoutContent(t){return t.nodeType===this.ELEMENT_NODE&&!t.textContent.trim().length&&(!t.children.length||t.children.length==t.getElementsByTagName("br").length+t.getElementsByTagName("hr").length)},_hasChildBlockElement(t){return this._someNode(t.childNodes,function(s){return this.DIV_TO_P_ELEMS.has(s.tagName)||this._hasChildBlockElement(s)})},_isPhrasingContent(t){return t.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.includes(t.tagName)||(t.tagName==="A"||t.tagName==="DEL"||t.tagName==="INS")&&this._everyNode(t.childNodes,this._isPhrasingContent)},_isWhitespace(t){return t.nodeType===this.TEXT_NODE&&t.textContent.trim().length===0||t.nodeType===this.ELEMENT_NODE&&t.tagName==="BR"},_getInnerText(t,s){s=typeof s>"u"?!0:s;var i=t.textContent.trim();return s?i.replace(this.REGEXPS.normalize," "):i},_getCharCount(t,s){return s=s||",",this._getInnerText(t).split(s).length-1},_cleanStyles(t){if(!(!t||t.tagName.toLowerCase()==="svg")){for(var s=0;s<this.PRESENTATIONAL_ATTRIBUTES.length;s++)t.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[s]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.includes(t.tagName)&&(t.removeAttribute("width"),t.removeAttribute("height"));for(var i=t.firstElementChild;i!==null;)this._cleanStyles(i),i=i.nextElementSibling}},_getLinkDensity(t){var s=this._getInnerText(t).length;if(s===0)return 0;var i=0;return this._forEachNode(t.getElementsByTagName("a"),function(n){var l=n.getAttribute("href"),r=l&&this.REGEXPS.hashUrl.test(l)?.3:1;i+=this._getInnerText(n).length*r}),i/s},_getClassWeight(t){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var s=0;return typeof t.className=="string"&&t.className!==""&&(this.REGEXPS.negative.test(t.className)&&(s-=25),this.REGEXPS.positive.test(t.className)&&(s+=25)),typeof t.id=="string"&&t.id!==""&&(this.REGEXPS.negative.test(t.id)&&(s-=25),this.REGEXPS.positive.test(t.id)&&(s+=25)),s},_clean(t,s){var i=["object","embed","iframe"].includes(s);this._removeNodes(this._getAllNodesWithTag(t,[s]),function(n){if(i){for(var l=0;l<n.attributes.length;l++)if(this._allowedVideoRegex.test(n.attributes[l].value))return!1;if(n.tagName==="object"&&this._allowedVideoRegex.test(n.innerHTML))return!1}return!0})},_hasAncestorTag(t,s,i,n){i=i||3,s=s.toUpperCase();for(var l=0;t.parentNode;){if(i>0&&l>i)return!1;if(t.parentNode.tagName===s&&(!n||n(t.parentNode)))return!0;t=t.parentNode,l++}return!1},_getRowAndColumnCount(t){for(var s=0,i=0,n=t.getElementsByTagName("tr"),l=0;l<n.length;l++){var r=n[l].getAttribute("rowspan")||0;r&&(r=parseInt(r,10)),s+=r||1;for(var o=0,f=n[l].getElementsByTagName("td"),m=0;m<f.length;m++){var p=f[m].getAttribute("colspan")||0;p&&(p=parseInt(p,10)),o+=p||1}i=Math.max(i,o)}return{rows:s,columns:i}},_markDataTables(t){for(var s=t.getElementsByTagName("table"),i=0;i<s.length;i++){var n=s[i],l=n.getAttribute("role");if(l=="presentation"){n._readabilityDataTable=!1;continue}var r=n.getAttribute("datatable");if(r=="0"){n._readabilityDataTable=!1;continue}var o=n.getAttribute("summary");if(o){n._readabilityDataTable=!0;continue}var f=n.getElementsByTagName("caption")[0];if(f&&f.childNodes.length){n._readabilityDataTable=!0;continue}var m=["col","colgroup","tfoot","thead","th"],p=function(h){return!!n.getElementsByTagName(h)[0]};if(m.some(p)){this.log("Data table because found data-y descendant"),n._readabilityDataTable=!0;continue}if(n.getElementsByTagName("table")[0]){n._readabilityDataTable=!1;continue}var _=this._getRowAndColumnCount(n);if(_.columns==1||_.rows==1){n._readabilityDataTable=!1;continue}if(_.rows>=10||_.columns>4){n._readabilityDataTable=!0;continue}n._readabilityDataTable=_.rows*_.columns>10}},_fixLazyImages(t){this._forEachNode(this._getAllNodesWithTag(t,["img","picture","figure"]),function(s){if(s.src&&this.REGEXPS.b64DataUrl.test(s.src)){var i=this.REGEXPS.b64DataUrl.exec(s.src);if(i[1]==="image/svg+xml")return;for(var n=!1,l=0;l<s.attributes.length;l++){var r=s.attributes[l];if(r.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(r.value)){n=!0;break}}if(n){var o=i[0].length,f=s.src.length-o;f<133&&s.removeAttribute("src")}}if(!((s.src||s.srcset&&s.srcset!="null")&&!s.className.toLowerCase().includes("lazy"))){for(var m=0;m<s.attributes.length;m++)if(r=s.attributes[m],!(r.name==="src"||r.name==="srcset"||r.name==="alt")){var p=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(r.value)?p="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(r.value)&&(p="src"),p){if(s.tagName==="IMG"||s.tagName==="PICTURE")s.setAttribute(p,r.value);else if(s.tagName==="FIGURE"&&!this._getAllNodesWithTag(s,["img","picture"]).length){var _=this._doc.createElement("img");_.setAttribute(p,r.value),s.appendChild(_)}}}}})},_getTextDensity(t,s){var i=this._getInnerText(t,!0).length;if(i===0)return 0;var n=0,l=this._getAllNodesWithTag(t,s);return this._forEachNode(l,r=>n+=this._getInnerText(r,!0).length),n/i},_cleanConditionally(t,s){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(t,[s]),function(i){var n=function(E){return E._readabilityDataTable},l=s==="ul"||s==="ol";if(!l){var r=0,o=this._getAllNodesWithTag(i,["ul","ol"]);this._forEachNode(o,E=>r+=this._getInnerText(E).length),l=r/this._getInnerText(i).length>.9}if(s==="table"&&n(i)||this._hasAncestorTag(i,"table",-1,n)||this._hasAncestorTag(i,"code")||[...i.getElementsByTagName("table")].some(E=>E._readabilityDataTable))return!1;var f=this._getClassWeight(i);this.log("Cleaning Conditionally",i);var m=0;if(f+m<0)return!0;if(this._getCharCount(i,",")<10){for(var p=i.getElementsByTagName("p").length,_=i.getElementsByTagName("img").length,h=i.getElementsByTagName("li").length-100,v=i.getElementsByTagName("input").length,d=this._getTextDensity(i,["h1","h2","h3","h4","h5","h6"]),b=0,g=this._getAllNodesWithTag(i,["object","embed","iframe"]),w=0;w<g.length;w++){for(var k=0;k<g[w].attributes.length;k++)if(this._allowedVideoRegex.test(g[w].attributes[k].value))return!1;if(g[w].tagName==="object"&&this._allowedVideoRegex.test(g[w].innerHTML))return!1;b++}var A=this._getInnerText(i);if(this.REGEXPS.adWords.test(A)||this.REGEXPS.loadingWords.test(A))return!0;var S=A.length,z=this._getLinkDensity(i),O=["SPAN","LI","TD"].concat(Array.from(this.DIV_TO_P_ELEMS)),U=this._getTextDensity(i,O),R=this._hasAncestorTag(i,"figure"),B=(()=>{const D=[];return!R&&_>1&&p/_<.5&&D.push(`Bad p to img ratio (img=${_}, p=${p})`),!l&&h>p&&D.push(`Too many li's outside of a list. (li=${h} > p=${p})`),v>Math.floor(p/3)&&D.push(`Too many inputs per p. (input=${v}, p=${p})`),!l&&!R&&d<.9&&S<25&&(_===0||_>2)&&z>0&&D.push(`Suspiciously short. (headingDensity=${d}, img=${_}, linkDensity=${z})`),!l&&f<25&&z>.2+this._linkDensityModifier&&D.push(`Low weight and a little linky. (linkDensity=${z})`),f>=25&&z>.5+this._linkDensityModifier&&D.push(`High weight and mostly links. (linkDensity=${z})`),(b===1&&S<75||b>1)&&D.push(`Suspicious embed. (embedCount=${b}, contentLength=${S})`),_===0&&U===0&&D.push(`No useful content. (img=${_}, textDensity=${U})`),D.length?(this.log("Checks failed",D),!0):!1})();if(l&&B){for(var K=0;K<i.children.length;K++)if(i.children[K].children.length>1)return B;let D=i.getElementsByTagName("li").length;if(_==D)return!1}return B}return!1})},_cleanMatchedNodes(t,s){for(var i=this._getNextNode(t,!0),n=this._getNextNode(t);n&&n!=i;)s.call(this,n,n.className+" "+n.id)?n=this._removeAndGetNext(n):n=this._getNextNode(n)},_cleanHeaders(t){let s=this._getAllNodesWithTag(t,["h1","h2"]);this._removeNodes(s,function(i){let n=this._getClassWeight(i)<0;return n&&this.log("Removing header with low class weight:",i),n})},_headerDuplicatesTitle(t){if(t.tagName!="H1"&&t.tagName!="H2")return!1;var s=this._getInnerText(t,!1);return this.log("Evaluating similarity of header:",s,this._articleTitle),this._textSimilarity(this._articleTitle,s)>.75},_flagIsActive(t){return(this._flags&t)>0},_removeFlag(t){this._flags=this._flags&~t},_isProbablyVisible(t){return(!t.style||t.style.display!="none")&&(!t.style||t.style.visibility!="hidden")&&!t.hasAttribute("hidden")&&(!t.hasAttribute("aria-hidden")||t.getAttribute("aria-hidden")!="true"||t.className&&t.className.includes&&t.className.includes("fallback-image"))},parse(){if(this._maxElemsToParse>0){var t=this._doc.getElementsByTagName("*").length;if(t>this._maxElemsToParse)throw new Error("Aborting parsing document; "+t+" elements found")}this._unwrapNoscriptImages(this._doc);var s=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var i=this._getArticleMetadata(s);this._metadata=i,this._articleTitle=i.title;var n=this._grabArticle();if(!n)return null;if(this.log("Grabbed: "+n.innerHTML),this._postProcessContent(n),!i.excerpt){var l=n.getElementsByTagName("p");l.length&&(i.excerpt=l[0].textContent.trim())}var r=n.textContent;return{title:this._articleTitle,byline:i.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(n),textContent:r,length:r.length,excerpt:i.excerpt,siteName:i.siteName||this._articleSiteName,publishedTime:i.publishedTime}}},e.exports=a})(_r)),_r.exports}var vr={exports:{}},Yr;function cn(){return Yr||(Yr=1,(function(e){var a={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function t(i){return(!i.style||i.style.display!="none")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.includes&&i.className.includes("fallback-image"))}function s(i,n={}){typeof n=="function"&&(n={visibilityChecker:n});var l={minScore:20,minContentLength:140,visibilityChecker:t};n=Object.assign(l,n);var r=i.querySelectorAll("p, pre, article"),o=i.querySelectorAll("div > br");if(o.length){var f=new Set(r);[].forEach.call(o,function(p){f.add(p.parentNode)}),r=Array.from(f)}var m=0;return[].some.call(r,function(p){if(!n.visibilityChecker(p))return!1;var _=p.className+" "+p.id;if(a.unlikelyCandidates.test(_)&&!a.okMaybeItsACandidate.test(_)||p.matches("li p"))return!1;var h=p.textContent.trim().length;return h<n.minContentLength?!1:(m+=Math.sqrt(h-n.minContentLength),m>n.minScore)})}e.exports=s})(vr)),vr.exports}var mr,Kr;function dn(){if(Kr)return mr;Kr=1;var e=hn(),a=cn();return mr={Readability:e,isProbablyReaderable:a},mr}var pn=dn();const _n="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(_n);let Re=!1,vn=!1;function mn(){Re=!0}mn();const gn=1,bn=2,yn=16,wn=2,En=4,xn=8,kn=1,Sn=2,kt=Symbol(),An="http://www.w3.org/1999/xhtml",yr=!1;var Rr=Array.isArray,Nn=Array.prototype.indexOf,or=Array.from,yi=Object.defineProperty,Ee=Object.getOwnPropertyDescriptor,wi=Object.getOwnPropertyDescriptors,Tn=Object.prototype,In=Array.prototype,Dr=Object.getPrototypeOf,Jr=Object.isExtensible;const xe=()=>{};function Cn(e){return e()}function wr(e){for(var a=0;a<e.length;a++)e[a]()}function Ei(){var e,a,t=new Promise((s,i)=>{e=s,a=i});return{promise:t,resolve:e,reject:a}}const xt=2,xi=4,lr=8,Rn=1<<24,Jt=16,Qt=32,pe=64,ur=128,Mt=512,wt=1024,Ct=2048,Ut=4096,Ot=8192,Xt=16384,Or=32768,Ae=65536,Qr=1<<17,ki=1<<18,De=1<<19,Si=1<<20,ie=1<<25,he=32768,Er=1<<21,Lr=1<<22,ne=1<<23,ke=Symbol("$state"),Dn=Symbol("legacy props"),On=Symbol(""),be=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Pr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ln(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Pn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Fn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Mn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Un(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Gn(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Hn(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ai(e){return e===this.v}function Ni(e,a){return e!=e?a==a:e!==a||e!==null&&typeof e=="object"||typeof e=="function"}function Ti(e){return!Ni(e,this.v)}let vt=null;function Ne(e){vt=e}function fr(e,a=!1,t){vt={p:vt,i:!1,c:null,e:null,s:e,x:null,l:Re&&!a?{s:null,u:null,$:[]}:null}}function hr(e){var a=vt,t=a.e;if(t!==null){a.e=null;for(var s of t)ji(s)}return a.i=!0,vt=a.p,{}}function He(){return!Re||vt!==null&&vt.l===null}let ye=[];function Zn(){var e=ye;ye=[],wr(e)}function cr(e){if(ye.length===0){var a=ye;queueMicrotask(()=>{a===ye&&Zn()})}ye.push(e)}function Ii(e){var a=dt;if(a===null)return ft.f|=ne,e;if((a.f&Or)===0){if((a.f&ur)===0)throw e;a.b.error(e)}else Te(e,a)}function Te(e,a){for(;a!==null;){if((a.f&ur)!==0)try{a.b.error(e);return}catch(t){e=t}a=a.parent}throw e}const Xe=new Set;let mt=null,Ft=null,Wt=[],zr=null,xr=!1;class Gt{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#i=0;#r=0;#l=null;#s=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(a){Wt=[],this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const s of a)this.#a(s,t);this.is_fork||this.#f(),this.is_deferred()?(this.#o(t.effects),this.#o(t.render_effects)):(mt=null,ti(t.render_effects),ti(t.effects),this.#l?.resolve()),Ft=null}#a(a,t){a.f^=wt;for(var s=a.first;s!==null;){var i=s.f,n=(i&(Qt|pe))!==0,l=n&&(i&wt)!==0,r=l||(i&Ot)!==0||this.skipped_effects.has(s);if((s.f&ur)!==0&&s.b?.is_pending()&&(t={parent:t,effect:s,effects:[],render_effects:[]}),!r&&s.fn!==null){n?s.f^=wt:(i&xi)!==0?t.effects.push(s):Oe(s)&&((s.f&Jt)!==0&&this.#s.add(s),Ce(s));var o=s.first;if(o!==null){s=o;continue}}var f=s.parent;for(s=s.next;s===null&&f!==null;)f===t.effect&&(this.#o(t.effects),this.#o(t.render_effects),t=t.parent),s=f.next,f=f.parent}}#o(a){for(const t of a)(t.f&Ct)!==0?this.#s.add(t):(t.f&Ut)!==0&&this.#n.add(t),this.#u(t.deps),Et(t,wt)}#u(a){if(a!==null)for(const t of a)(t.f&xt)===0||(t.f&he)===0||(t.f^=he,this.#u(t.deps))}capture(a,t){this.previous.has(a)||this.previous.set(a,t),(a.f&ne)===0&&(this.current.set(a,a.v),Ft?.set(a,a.v))}activate(){mt=this,this.apply()}deactivate(){mt===this&&(mt=null,Ft=null)}flush(){if(this.activate(),Wt.length>0){if(qn(),mt!==null&&mt!==this)return}else this.#i===0&&this.process([]);this.deactivate()}discard(){for(const a of this.#e)a(this);this.#e.clear()}#f(){if(this.#r===0){for(const a of this.#t)a();this.#t.clear()}this.#i===0&&this.#h()}#h(){if(Xe.size>1){this.previous.clear();var a=Ft,t=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const n of Xe){if(n===this){t=!1;continue}const l=[];for(const[o,f]of this.current){if(n.current.has(o))if(t&&f!==n.current.get(o))n.current.set(o,f);else continue;l.push(o)}if(l.length===0)continue;const r=[...n.current.keys()].filter(o=>!this.current.has(o));if(r.length>0){var i=Wt;Wt=[];const o=new Set,f=new Map;for(const m of l)Ci(m,r,o,f);if(Wt.length>0){mt=n,n.apply();for(const m of Wt)n.#a(m,s);n.deactivate()}Wt=i}}mt=null,Ft=a}this.committed=!0,Xe.delete(this)}increment(a){this.#i+=1,a&&(this.#r+=1)}decrement(a){this.#i-=1,a&&(this.#r-=1),this.revive()}revive(){for(const a of this.#s)this.#n.delete(a),Et(a,Ct),ce(a);for(const a of this.#n)Et(a,Ut),ce(a);this.flush()}oncommit(a){this.#t.add(a)}ondiscard(a){this.#e.add(a)}settled(){return(this.#l??=Ei()).promise}static ensure(){if(mt===null){const a=mt=new Gt;Xe.add(mt),Gt.enqueue(()=>{mt===a&&a.flush()})}return mt}static enqueue(a){cr(a)}apply(){}}function qn(){var e=ue;xr=!0;var a=null;try{var t=0;for(nr(!0);Wt.length>0;){var s=Gt.ensure();if(t++>1e3){var i,n;$n()}s.process(Wt),se.clear()}}finally{xr=!1,nr(e),zr=null}}function $n(){try{Fn()}catch(e){Te(e,zr)}}let Vt=null;function ti(e){var a=e.length;if(a!==0){for(var t=0;t<a;){var s=e[t++];if((s.f&(Xt|Ot))===0&&Oe(s)&&(Vt=new Set,Ce(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Hi(s):s.fn=null),Vt?.size>0)){se.clear();for(const i of Vt){if((i.f&(Xt|Ot))!==0)continue;const n=[i];let l=i.parent;for(;l!==null;)Vt.has(l)&&(Vt.delete(l),n.push(l)),l=l.parent;for(let r=n.length-1;r>=0;r--){const o=n[r];(o.f&(Xt|Ot))===0&&Ce(o)}}Vt.clear()}}Vt=null}}function Ci(e,a,t,s){if(!t.has(e)&&(t.add(e),e.reactions!==null))for(const i of e.reactions){const n=i.f;(n&xt)!==0?Ci(i,a,t,s):(n&(Lr|Jt))!==0&&(n&Ct)===0&&Ri(i,a,s)&&(Et(i,Ct),ce(i))}}function Ri(e,a,t){const s=t.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const i of e.deps){if(a.includes(i))return!0;if((i.f&xt)!==0&&Ri(i,a,t))return t.set(i,!0),!0}return t.set(e,!1),!1}function ce(e){for(var a=zr=e;a.parent!==null;){a=a.parent;var t=a.f;if(xr&&a===dt&&(t&Jt)!==0&&(t&ki)===0)return;if((t&(pe|Qt))!==0){if((t&wt)===0)return;a.f^=wt}}Wt.push(a)}function Vn(e){let a=0,t=de(0),s;return()=>{We()&&(P(t),Gr(()=>(a===0&&(s=ct(()=>e(()=>Ue(t)))),a+=1,()=>{cr(()=>{a-=1,a===0&&(s?.(),s=void 0,Ue(t))})})))}}var Xn=Ae|De|ur;function Yn(e,a,t){new Kn(e,a,t)}class Kn{parent;#t=!1;#e;#i=null;#r;#l;#s;#n=null;#a=null;#o=null;#u=null;#f=null;#h=0;#c=0;#p=!1;#d=null;#b=Vn(()=>(this.#d=de(this.#h),()=>{this.#d=null}));constructor(a,t,s){this.#e=a,this.#r=t,this.#l=s,this.parent=dt.b,this.#t=!!this.#r.pending,this.#s=Hr(()=>{dt.b=this;{var i=this.#m();try{this.#n=Bt(()=>s(i))}catch(n){this.error(n)}this.#c>0?this.#v():this.#t=!1}return()=>{this.#f?.remove()}},Xn)}#y(){try{this.#n=Bt(()=>this.#l(this.#e))}catch(a){this.error(a)}this.#t=!1}#w(){const a=this.#r.pending;a&&(this.#a=Bt(()=>a(this.#e)),Gt.enqueue(()=>{var t=this.#m();this.#n=this.#_(()=>(Gt.ensure(),Bt(()=>this.#l(t)))),this.#c>0?this.#v():(le(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#m(){var a=this.#e;return this.#t&&(this.#f=Yt(),this.#e.before(this.#f),a=this.#f),a}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#_(a){var t=dt,s=ft,i=vt;Zt(this.#s),Tt(this.#s),Ne(this.#s.ctx);try{return a()}catch(n){return Ii(n),null}finally{Zt(t),Tt(s),Ne(i)}}#v(){const a=this.#r.pending;this.#n!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#f),$i(this.#n,this.#u)),this.#a===null&&(this.#a=Bt(()=>a(this.#e)))}#g(a){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(a);return}this.#c+=a,this.#c===0&&(this.#t=!1,this.#a&&le(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(a){this.#g(a),this.#h+=a,this.#d&&Ie(this.#d,this.#h)}get_effect_pending(){return this.#b(),P(this.#d)}error(a){var t=this.#r.onerror;let s=this.#r.failed;if(this.#p||!t&&!s)throw a;this.#n&&(It(this.#n),this.#n=null),this.#a&&(It(this.#a),this.#a=null),this.#o&&(It(this.#o),this.#o=null);var i=!1,n=!1;const l=()=>{if(i){Hn();return}i=!0,n&&Gn(),Gt.ensure(),this.#h=0,this.#o!==null&&le(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#n=this.#_(()=>(this.#p=!1,Bt(()=>this.#l(this.#e)))),this.#c>0?this.#v():this.#t=!1};var r=ft;try{Tt(null),n=!0,t?.(a,l),n=!1}catch(o){Te(o,this.#s&&this.#s.parent)}finally{Tt(r)}s&&cr(()=>{this.#o=this.#_(()=>{Gt.ensure(),this.#p=!0;try{return Bt(()=>{s(this.#e,()=>a,()=>l)})}catch(o){return Te(o,this.#s.parent),null}finally{this.#p=!1}})})}}function Jn(e,a,t,s){const i=He()?Br:Se;if(t.length===0&&e.length===0){s(a.map(i));return}var n=mt,l=dt,r=Qn();function o(){Promise.all(t.map(f=>ts(f))).then(f=>{r();try{s([...a.map(i),...f])}catch(m){(l.f&Xt)===0&&Te(m,l)}n?.deactivate(),rr()}).catch(f=>{Te(f,l)})}e.length>0?Promise.all(e).then(()=>{r();try{return o()}finally{n?.deactivate(),rr()}}):o()}function Qn(){var e=dt,a=ft,t=vt,s=mt;return function(n=!0){Zt(e),Tt(a),Ne(t),n&&s?.activate()}}function rr(){Zt(null),Tt(null),Ne(null)}function Br(e){var a=xt|Ct,t=ft!==null&&(ft.f&xt)!==0?ft:null;return dt!==null&&(dt.f|=De),{ctx:vt,deps:null,effects:null,equals:Ai,f:a,fn:e,reactions:null,rv:0,v:kt,wv:0,parent:t??dt,ac:null}}function ts(e,a){let t=dt;t===null&&Ln();var s=t.b,i=void 0,n=de(kt),l=!ft,r=new Map;return ls(()=>{var o=Ei();i=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{f===mt&&f.committed&&f.deactivate(),rr()})}catch(_){o.reject(_),rr()}var f=mt;if(l){var m=!s.is_pending();s.update_pending_count(1),f.increment(m),r.get(f)?.reject(be),r.delete(f),r.set(f,o)}const p=(_,h=void 0)=>{if(f.activate(),h)h!==be&&(n.f|=ne,Ie(n,h));else{(n.f&ne)!==0&&(n.f^=ne),Ie(n,_);for(const[v,d]of r){if(r.delete(v),v===f)break;d.reject(be)}}l&&(s.update_pending_count(-1),f.decrement(m))};o.promise.then(p,_=>p(null,_||"unknown"))}),Ur(()=>{for(const o of r.values())o.reject(be)}),new Promise(o=>{function f(m){function p(){m===i?o(n):f(i)}m.then(p,p)}f(i)})}function Se(e){const a=Br(e);return a.equals=Ti,a}function Di(e){var a=e.effects;if(a!==null){e.effects=null;for(var t=0;t<a.length;t+=1)It(a[t])}}function es(e){for(var a=e.parent;a!==null;){if((a.f&xt)===0)return(a.f&Xt)===0?a:null;a=a.parent}return null}function Fr(e){var a,t=dt;Zt(es(e));try{e.f&=~he,Di(e),a=Ki(e)}finally{Zt(t)}return a}function Oi(e){var a=Fr(e);if(e.equals(a)||(mt?.is_fork||(e.v=a),e.wv=Xi()),!_e)if(Ft!==null)(We()||mt?.is_fork)&&Ft.set(e,a);else{var t=(e.f&Mt)===0?Ut:wt;Et(e,t)}}let kr=new Set;const se=new Map;let Li=!1;function de(e,a){var t={f:0,v:e,reactions:null,equals:Ai,rv:0,wv:0};return t}function ee(e,a){const t=de(e);return hs(t),t}function St(e,a=!1,t=!0){const s=de(e);return a||(s.equals=Ti),Re&&t&&vt!==null&&vt.l!==null&&(vt.l.s??=[]).push(s),s}function gr(e,a){return lt(e,ct(()=>P(e))),a}function lt(e,a,t=!1){ft!==null&&(!Ht||(ft.f&Qr)!==0)&&He()&&(ft.f&(xt|Jt|Lr|Qr))!==0&&!Kt?.includes(e)&&Wn();let s=t?we(a):a;return Ie(e,s)}function Ie(e,a){if(!e.equals(a)){var t=e.v;_e?se.set(e,a):se.set(e,t),e.v=a;var s=Gt.ensure();s.capture(e,t),(e.f&xt)!==0&&((e.f&Ct)!==0&&Fr(e),Et(e,(e.f&Mt)!==0?wt:Ut)),e.wv=Xi(),Pi(e,Ct),He()&&dt!==null&&(dt.f&wt)!==0&&(dt.f&(Qt|pe))===0&&(Pt===null?cs([e]):Pt.push(e)),!s.is_fork&&kr.size>0&&!Li&&rs()}return a}function rs(){Li=!1;var e=ue;nr(!0);const a=Array.from(kr);try{for(const t of a)(t.f&wt)!==0&&Et(t,Ut),Oe(t)&&Ce(t)}finally{nr(e)}kr.clear()}function Ue(e){lt(e,e.v+1)}function Pi(e,a){var t=e.reactions;if(t!==null)for(var s=He(),i=t.length,n=0;n<i;n++){var l=t[n],r=l.f;if(!(!s&&l===dt)){var o=(r&Ct)===0;if(o&&Et(l,a),(r&xt)!==0){var f=l;Ft?.delete(f),(r&he)===0&&(r&Mt&&(l.f|=he),Pi(f,Ut))}else o&&((r&Jt)!==0&&Vt!==null&&Vt.add(l),ce(l))}}}function we(e){if(typeof e!="object"||e===null||ke in e)return e;const a=Dr(e);if(a!==Tn&&a!==In)return e;var t=new Map,s=Rr(e),i=ee(0),n=fe,l=r=>{if(fe===n)return r();var o=ft,f=fe;Tt(null),ri(n);var m=r();return Tt(o),ri(f),m};return s&&t.set("length",ee(e.length)),new Proxy(e,{defineProperty(r,o,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Un();var m=t.get(o);return m===void 0?m=l(()=>{var p=ee(f.value);return t.set(o,p),p}):lt(m,f.value,!0),!0},deleteProperty(r,o){var f=t.get(o);if(f===void 0){if(o in r){const m=l(()=>ee(kt));t.set(o,m),Ue(i)}}else lt(f,kt),Ue(i);return!0},get(r,o,f){if(o===ke)return e;var m=t.get(o),p=o in r;if(m===void 0&&(!p||Ee(r,o)?.writable)&&(m=l(()=>{var h=we(p?r[o]:kt),v=ee(h);return v}),t.set(o,m)),m!==void 0){var _=P(m);return _===kt?void 0:_}return Reflect.get(r,o,f)},getOwnPropertyDescriptor(r,o){var f=Reflect.getOwnPropertyDescriptor(r,o);if(f&&"value"in f){var m=t.get(o);m&&(f.value=P(m))}else if(f===void 0){var p=t.get(o),_=p?.v;if(p!==void 0&&_!==kt)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return f},has(r,o){if(o===ke)return!0;var f=t.get(o),m=f!==void 0&&f.v!==kt||Reflect.has(r,o);if(f!==void 0||dt!==null&&(!m||Ee(r,o)?.writable)){f===void 0&&(f=l(()=>{var _=m?we(r[o]):kt,h=ee(_);return h}),t.set(o,f));var p=P(f);if(p===kt)return!1}return m},set(r,o,f,m){var p=t.get(o),_=o in r;if(s&&o==="length")for(var h=f;h<p.v;h+=1){var v=t.get(h+"");v!==void 0?lt(v,kt):h in r&&(v=l(()=>ee(kt)),t.set(h+"",v))}if(p===void 0)(!_||Ee(r,o)?.writable)&&(p=l(()=>ee(void 0)),lt(p,we(f)),t.set(o,p));else{_=p.v!==kt;var d=l(()=>we(f));lt(p,d)}var b=Reflect.getOwnPropertyDescriptor(r,o);if(b?.set&&b.set.call(m,f),!_){if(s&&typeof o=="string"){var g=t.get("length"),w=Number(o);Number.isInteger(w)&&w>=g.v&&lt(g,w+1)}Ue(i)}return!0},ownKeys(r){P(i);var o=Reflect.ownKeys(r).filter(p=>{var _=t.get(p);return _===void 0||_.v!==kt});for(var[f,m]of t)m.v!==kt&&!(f in r)&&o.push(f);return o},setPrototypeOf(){jn()}})}var Sr,zi,Bi,Fi;function is(){if(Sr===void 0){Sr=window,zi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,a=Node.prototype,t=Text.prototype;Bi=Ee(a,"firstChild").get,Fi=Ee(a,"nextSibling").get,Jr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Jr(t)&&(t.__t=void 0)}}function Yt(e=""){return document.createTextNode(e)}function ir(e){return Bi.call(e)}function Ze(e){return Fi.call(e)}function st(e,a){return ir(e)}function Be(e,a=!1){{var t=ir(e);return t instanceof Comment&&t.data===""?Ze(t):t}}function _t(e,a=1,t=!1){let s=e;for(;a--;)s=Ze(s);return s}function ns(e){e.textContent=""}function Mi(){return!1}function Mr(e){var a=ft,t=dt;Tt(null),Zt(null);try{return e()}finally{Tt(a),Zt(t)}}function Ui(e){dt===null&&(ft===null&&Bn(),zn()),_e&&Pn()}function ss(e,a){var t=a.last;t===null?a.last=a.first=e:(t.next=e,e.prev=t,a.last=e)}function te(e,a,t){var s=dt;s!==null&&(s.f&Ot)!==0&&(e|=Ot);var i={ctx:vt,deps:null,nodes:null,f:e|Ct|Mt,first:null,fn:a,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{Ce(i),i.f|=Or}catch(r){throw It(i),r}else a!==null&&ce(i);var n=i;if(t&&n.deps===null&&n.teardown===null&&n.nodes===null&&n.first===n.last&&(n.f&De)===0&&(n=n.first,(e&Jt)!==0&&(e&Ae)!==0&&n!==null&&(n.f|=Ae)),n!==null&&(n.parent=s,s!==null&&ss(n,s),ft!==null&&(ft.f&xt)!==0&&(e&pe)===0)){var l=ft;(l.effects??=[]).push(n)}return i}function We(){return ft!==null&&!Ht}function Ur(e){const a=te(lr,null,!1);return Et(a,wt),a.teardown=e,a}function Ar(e){Ui();var a=dt.f,t=!ft&&(a&Qt)!==0&&(a&Or)===0;if(t){var s=vt;(s.e??=[]).push(e)}else return ji(e)}function ji(e){return te(xi|Si,e,!1)}function as(e){return Ui(),te(lr|Si,e,!0)}function os(e){Gt.ensure();const a=te(pe|De,e,!0);return(t={})=>new Promise(s=>{t.outro?le(a,()=>{It(a),s(void 0)}):(It(a),s(void 0))})}function jr(e,a){var t=vt,s={effect:null,ran:!1,deps:e};t.l.$.push(s),s.effect=Gr(()=>{e(),!s.ran&&(s.ran=!0,ct(a))})}function Wr(){var e=vt;Gr(()=>{for(var a of e.l.$){a.deps();var t=a.effect;(t.f&wt)!==0&&Et(t,Ut),Oe(t)&&Ce(t),a.ran=!1}})}function ls(e){return te(Lr|De,e,!0)}function Gr(e,a=0){return te(lr|a,e,!0)}function oe(e,a=[],t=[],s=[]){Jn(s,a,t,i=>{te(lr,()=>e(...i.map(P)),!0)})}function Hr(e,a=0){var t=te(Jt|a,e,!0);return t}function Bt(e){return te(Qt|De,e,!0)}function Wi(e){var a=e.teardown;if(a!==null){const t=_e,s=ft;ei(!0),Tt(null);try{a.call(null)}finally{ei(t),Tt(s)}}}function Gi(e,a=!1){var t=e.first;for(e.first=e.last=null;t!==null;){const i=t.ac;i!==null&&Mr(()=>{i.abort(be)});var s=t.next;(t.f&pe)!==0?t.parent=null:It(t,a),t=s}}function us(e){for(var a=e.first;a!==null;){var t=a.next;(a.f&Qt)===0&&It(a),a=t}}function It(e,a=!0){var t=!1;(a||(e.f&ki)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(fs(e.nodes.start,e.nodes.end),t=!0),Gi(e,a&&!t),sr(e,0),Et(e,Xt);var s=e.nodes&&e.nodes.t;if(s!==null)for(const n of s)n.stop();Wi(e);var i=e.parent;i!==null&&i.first!==null&&Hi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function fs(e,a){for(;e!==null;){var t=e===a?null:Ze(e);e.remove(),e=t}}function Hi(e){var a=e.parent,t=e.prev,s=e.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),a!==null&&(a.first===e&&(a.first=s),a.last===e&&(a.last=t))}function le(e,a,t=!0){var s=[];Zi(e,s,!0);var i=()=>{t&&It(e),a&&a()},n=s.length;if(n>0){var l=()=>--n||i();for(var r of s)r.out(l)}else i()}function Zi(e,a,t){if((e.f&Ot)===0){e.f^=Ot;var s=e.nodes&&e.nodes.t;if(s!==null)for(const r of s)(r.is_global||t)&&a.push(r);for(var i=e.first;i!==null;){var n=i.next,l=(i.f&Ae)!==0||(i.f&Qt)!==0&&(e.f&Jt)!==0;Zi(i,a,l?t:!1),i=n}}}function Zr(e){qi(e,!0)}function qi(e,a){if((e.f&Ot)!==0){e.f^=Ot,(e.f&wt)===0&&(Et(e,Ct),ce(e));for(var t=e.first;t!==null;){var s=t.next,i=(t.f&Ae)!==0||(t.f&Qt)!==0;qi(t,i?a:!1),t=s}var n=e.nodes&&e.nodes.t;if(n!==null)for(const l of n)(l.is_global||a)&&l.in()}}function $i(e,a){if(e.nodes)for(var t=e.nodes.start,s=e.nodes.end;t!==null;){var i=t===s?null:Ze(t);a.append(t),t=i}}let ue=!1;function nr(e){ue=e}let _e=!1;function ei(e){_e=e}let ft=null,Ht=!1;function Tt(e){ft=e}let dt=null;function Zt(e){dt=e}let Kt=null;function hs(e){ft!==null&&(Kt===null?Kt=[e]:Kt.push(e))}let At=null,Rt=0,Pt=null;function cs(e){Pt=e}let Vi=1,Ge=0,fe=Ge;function ri(e){fe=e}function Xi(){return++Vi}function Oe(e){var a=e.f;if((a&Ct)!==0)return!0;if(a&xt&&(e.f&=~he),(a&Ut)!==0){var t=e.deps;if(t!==null)for(var s=t.length,i=0;i<s;i++){var n=t[i];if(Oe(n)&&Oi(n),n.wv>e.wv)return!0}(a&Mt)!==0&&Ft===null&&Et(e,wt)}return!1}function Yi(e,a,t=!0){var s=e.reactions;if(s!==null&&!Kt?.includes(e))for(var i=0;i<s.length;i++){var n=s[i];(n.f&xt)!==0?Yi(n,a,!1):a===n&&(t?Et(n,Ct):(n.f&wt)!==0&&Et(n,Ut),ce(n))}}function Ki(e){var a=At,t=Rt,s=Pt,i=ft,n=Kt,l=vt,r=Ht,o=fe,f=e.f;At=null,Rt=0,Pt=null,ft=(f&(Qt|pe))===0?e:null,Kt=null,Ne(e.ctx),Ht=!1,fe=++Ge,e.ac!==null&&(Mr(()=>{e.ac.abort(be)}),e.ac=null);try{e.f|=Er;var m=e.fn,p=m(),_=e.deps;if(At!==null){var h;if(sr(e,Rt),_!==null&&Rt>0)for(_.length=Rt+At.length,h=0;h<At.length;h++)_[Rt+h]=At[h];else e.deps=_=At;if(We()&&(e.f&Mt)!==0)for(h=Rt;h<_.length;h++)(_[h].reactions??=[]).push(e)}else _!==null&&Rt<_.length&&(sr(e,Rt),_.length=Rt);if(He()&&Pt!==null&&!Ht&&_!==null&&(e.f&(xt|Ut|Ct))===0)for(h=0;h<Pt.length;h++)Yi(Pt[h],e);return i!==null&&i!==e&&(Ge++,Pt!==null&&(s===null?s=Pt:s.push(...Pt))),(e.f&ne)!==0&&(e.f^=ne),p}catch(v){return Ii(v)}finally{e.f^=Er,At=a,Rt=t,Pt=s,ft=i,Kt=n,Ne(l),Ht=r,fe=o}}function ds(e,a){let t=a.reactions;if(t!==null){var s=Nn.call(t,e);if(s!==-1){var i=t.length-1;i===0?t=a.reactions=null:(t[s]=t[i],t.pop())}}t===null&&(a.f&xt)!==0&&(At===null||!At.includes(a))&&(Et(a,Ut),(a.f&Mt)!==0&&(a.f^=Mt,a.f&=~he),Di(a),sr(a,0))}function sr(e,a){var t=e.deps;if(t!==null)for(var s=a;s<t.length;s++)ds(e,t[s])}function Ce(e){var a=e.f;if((a&Xt)===0){Et(e,wt);var t=dt,s=ue;dt=e,ue=!0;try{(a&(Jt|Rn))!==0?us(e):Gi(e),Wi(e);var i=Ki(e);e.teardown=typeof i=="function"?i:null,e.wv=Vi;var n;yr&&vn&&(e.f&Ct)!==0&&e.deps}finally{ue=s,dt=t}}}function P(e){var a=e.f,t=(a&xt)!==0;if(ft!==null&&!Ht){var s=dt!==null&&(dt.f&Xt)!==0;if(!s&&!Kt?.includes(e)){var i=ft.deps;if((ft.f&Er)!==0)e.rv<Ge&&(e.rv=Ge,At===null&&i!==null&&i[Rt]===e?Rt++:At===null?At=[e]:At.includes(e)||At.push(e));else{(ft.deps??=[]).push(e);var n=e.reactions;n===null?e.reactions=[ft]:n.includes(ft)||n.push(ft)}}}if(_e){if(se.has(e))return se.get(e);if(t){var l=e,r=l.v;return((l.f&wt)===0&&l.reactions!==null||Qi(l))&&(r=Fr(l)),se.set(l,r),r}}else t&&(!Ft?.has(e)||mt?.is_fork&&!We())&&(l=e,Oe(l)&&Oi(l),ue&&We()&&(l.f&Mt)===0&&Ji(l));if(Ft?.has(e))return Ft.get(e);if((e.f&ne)!==0)throw e.v;return e.v}function Ji(e){if(e.deps!==null){e.f^=Mt;for(const a of e.deps)(a.reactions??=[]).push(e),(a.f&xt)!==0&&(a.f&Mt)===0&&Ji(a)}}function Qi(e){if(e.v===kt)return!0;if(e.deps===null)return!1;for(const a of e.deps)if(se.has(a)||(a.f&xt)!==0&&Qi(a))return!0;return!1}function ct(e){var a=Ht;try{return Ht=!0,e()}finally{Ht=a}}const ps=-7169;function Et(e,a){e.f=e.f&ps|a}function $t(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ke in e)Nr(e);else if(!Array.isArray(e))for(let a in e){const t=e[a];typeof t=="object"&&t&&ke in t&&Nr(t)}}}function Nr(e,a=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!a.has(e)){a.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Nr(e[s],a)}catch{}const t=Dr(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=wi(t);for(let i in s){const n=s[i].get;if(n)try{n.call(e)}catch{}}}}}const _s=new Set,ii=new Set;function vs(e,a,t,s={}){function i(n){if(s.capture||Fe.call(a,n),!n.cancelBubble)return Mr(()=>t?.call(this,n))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?cr(()=>{a.addEventListener(e,i,s)}):a.addEventListener(e,i,s),i}function Dt(e,a,t,s,i){var n={capture:s,passive:i},l=vs(e,a,t,n);(a===document.body||a===window||a===document||a instanceof HTMLMediaElement)&&Ur(()=>{a.removeEventListener(e,l,n)})}let ni=null;function Fe(e){var a=this,t=a.ownerDocument,s=e.type,i=e.composedPath?.()||[],n=i[0]||e.target;ni=e;var l=0,r=ni===e&&e.__root;if(r){var o=i.indexOf(r);if(o!==-1&&(a===document||a===window)){e.__root=a;return}var f=i.indexOf(a);if(f===-1)return;o<=f&&(l=o)}if(n=i[l]||e.target,n!==a){yi(e,"currentTarget",{configurable:!0,get(){return n||t}});var m=ft,p=dt;Tt(null),Zt(null);try{for(var _,h=[];n!==null;){var v=n.assignedSlot||n.parentNode||n.host||null;try{var d=n["__"+s];d!=null&&(!n.disabled||e.target===n)&&d.call(n,e)}catch(b){_?h.push(b):_=b}if(e.cancelBubble||v===a||v===null)break;n=v}if(_){for(let b of h)queueMicrotask(()=>{throw b});throw _}}finally{e.__root=a,delete e.currentTarget,Tt(m),Zt(p)}}}function ms(e){var a=document.createElement("template");return a.innerHTML=e.replaceAll("<!>","<!---->"),a.content}function ar(e,a){var t=dt;t.nodes===null&&(t.nodes={start:e,end:a,a:null,t:null})}function ae(e,a){var t=(a&kn)!==0,s=(a&Sn)!==0,i,n=!e.startsWith("<!>");return()=>{i===void 0&&(i=ms(n?e:"<!>"+e),t||(i=ir(i)));var l=s||zi?document.importNode(i,!0):i.cloneNode(!0);if(t){var r=ir(l),o=l.lastChild;ar(r,o)}else ar(l,l);return l}}function si(e=""){{var a=Yt(e+"");return ar(a,a),a}}function ai(){var e=document.createDocumentFragment(),a=document.createComment(""),t=Yt();return e.append(a,t),ar(a,t),e}function zt(e,a){e!==null&&e.before(a)}const gs=["touchstart","touchmove"];function bs(e){return gs.includes(e)}function Nt(e,a){var t=a==null?"":typeof a=="object"?a+"":a;t!==(e.__t??=e.nodeValue)&&(e.__t=t,e.nodeValue=t+"")}function ys(e,a){return ws(e,a)}const ve=new Map;function ws(e,{target:a,anchor:t,props:s={},events:i,context:n,intro:l=!0}){is();var r=new Set,o=p=>{for(var _=0;_<p.length;_++){var h=p[_];if(!r.has(h)){r.add(h);var v=bs(h);a.addEventListener(h,Fe,{passive:v});var d=ve.get(h);d===void 0?(document.addEventListener(h,Fe,{passive:v}),ve.set(h,1)):ve.set(h,d+1)}}};o(or(_s)),ii.add(o);var f=void 0,m=os(()=>{var p=t??a.appendChild(Yt());return Yn(p,{pending:()=>{}},_=>{if(n){fr({});var h=vt;h.c=n}i&&(s.$$events=i),f=e(_,s)||{},n&&hr()}),()=>{for(var _ of r){a.removeEventListener(_,Fe);var h=ve.get(_);--h===0?(document.removeEventListener(_,Fe),ve.delete(_)):ve.set(_,h)}ii.delete(o),p!==t&&p.parentNode?.removeChild(p)}});return Es.set(f,m),f}let Es=new WeakMap;class xs{anchor;#t=new Map;#e=new Map;#i=new Map;#r=new Set;#l=!0;constructor(a,t=!0){this.anchor=a,this.#l=t}#s=()=>{var a=mt;if(this.#t.has(a)){var t=this.#t.get(a),s=this.#e.get(t);if(s)Zr(s),this.#r.delete(t);else{var i=this.#i.get(t);i&&(this.#e.set(t,i.effect),this.#i.delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[n,l]of this.#t){if(this.#t.delete(n),n===a)break;const r=this.#i.get(l);r&&(It(r.effect),this.#i.delete(l))}for(const[n,l]of this.#e){if(n===t||this.#r.has(n))continue;const r=()=>{if(Array.from(this.#t.values()).includes(n)){var f=document.createDocumentFragment();$i(l,f),f.append(Yt()),this.#i.set(n,{effect:l,fragment:f})}else It(l);this.#r.delete(n),this.#e.delete(n)};this.#l||!s?(this.#r.add(n),le(l,r,!1)):r()}}};#n=a=>{this.#t.delete(a);const t=Array.from(this.#t.values());for(const[s,i]of this.#i)t.includes(s)||(It(i.effect),this.#i.delete(s))};ensure(a,t){var s=mt,i=Mi();if(t&&!this.#e.has(a)&&!this.#i.has(a))if(i){var n=document.createDocumentFragment(),l=Yt();n.append(l),this.#i.set(a,{effect:Bt(()=>t(l)),fragment:n})}else this.#e.set(a,Bt(()=>t(this.anchor)));if(this.#t.set(s,a),i){for(const[r,o]of this.#e)r===a?s.skipped_effects.delete(o):s.skipped_effects.add(o);for(const[r,o]of this.#i)r===a?s.skipped_effects.delete(o.effect):s.skipped_effects.add(o.effect);s.oncommit(this.#s),s.ondiscard(this.#n)}else this.#s()}}function dr(e){vt===null&&Pr(),Re&&vt.l!==null?Ns(vt).m.push(e):Ar(()=>{const a=ct(e);if(typeof a=="function")return a})}function ks(e){vt===null&&Pr(),dr(()=>()=>ct(e))}function Ss(e,a,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:a,bubbles:t,cancelable:s})}function As(){const e=vt;return e===null&&Pr(),(a,t,s)=>{const i=e.s.$$events?.[a];if(i){const n=Rr(i)?i.slice():[i],l=Ss(a,t,s);for(const r of n)r.call(e.x,l);return!l.defaultPrevented}return!0}}function Ns(e){var a=e.l;return a.u??={a:[],b:[],m:[]}}function me(e,a,t=!1){var s=new xs(e),i=t?Ae:0;function n(l,r){s.ensure(l,r)}Hr(()=>{var l=!1;a((r,o=!0)=>{l=!0,n(o,r)}),l||n(!1,null)},i)}function Ts(e,a){return a}function Is(e,a,t){for(var s=[],i=a.length,n,l=a.length,r=0;r<i;r++){let p=a[r];le(p,()=>{if(n){if(n.pending.delete(p),n.done.add(p),n.pending.size===0){var _=e.outrogroups;Tr(or(n.done)),_.delete(n),_.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var o=s.length===0&&t!==null;if(o){var f=t,m=f.parentNode;ns(m),m.append(f),e.items.clear()}Tr(a,!o)}else n={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(n)}function Tr(e,a=!0){for(var t=0;t<e.length;t++)It(e[t],a)}var oi;function tn(e,a,t,s,i,n=null){var l=e,r=new Map;{var o=e;l=o.appendChild(Yt())}var f=null,m=Se(()=>{var b=t();return Rr(b)?b:b==null?[]:or(b)}),p,_=!0;function h(){d.fallback=f,Cs(d,p,l,a,s),f!==null&&(p.length===0?(f.f&ie)===0?Zr(f):(f.f^=ie,Me(f,null,l)):le(f,()=>{f=null}))}var v=Hr(()=>{p=P(m);for(var b=p.length,g=new Set,w=mt,k=Mi(),A=0;A<b;A+=1){var S=p[A],z=s(S,A),O=_?null:r.get(z);O?(O.v&&Ie(O.v,S),O.i&&Ie(O.i,A),k&&w.skipped_effects.delete(O.e)):(O=Rs(r,_?l:oi??=Yt(),S,z,A,i,a,t),_||(O.e.f|=ie),r.set(z,O)),g.add(z)}if(b===0&&n&&!f&&(_?f=Bt(()=>n(l)):(f=Bt(()=>n(oi??=Yt())),f.f|=ie)),!_)if(k){for(const[U,R]of r)g.has(U)||w.skipped_effects.add(R.e);w.oncommit(h),w.ondiscard(()=>{})}else h();P(m)}),d={effect:v,items:r,outrogroups:null,fallback:f};_=!1}function Cs(e,a,t,s,i){var n=a.length,l=e.items,r=e.effect.first,o,f=null,m=[],p=[],_,h,v,d;for(d=0;d<n;d+=1){if(_=a[d],h=i(_,d),v=l.get(h).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(v),U.done.delete(v);if((v.f&ie)!==0)if(v.f^=ie,v===r)Me(v,null,t);else{var b=f?f.next:r;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),re(e,f,v),re(e,v,b),Me(v,b,t),f=v,m=[],p=[],r=f.next;continue}if((v.f&Ot)!==0&&Zr(v),v!==r){if(o!==void 0&&o.has(v)){if(m.length<p.length){var g=p[0],w;f=g.prev;var k=m[0],A=m[m.length-1];for(w=0;w<m.length;w+=1)Me(m[w],g,t);for(w=0;w<p.length;w+=1)o.delete(p[w]);re(e,k.prev,A.next),re(e,f,k),re(e,A,g),r=g,f=A,d-=1,m=[],p=[]}else o.delete(v),Me(v,r,t),re(e,v.prev,v.next),re(e,v,f===null?e.effect.first:f.next),re(e,f,v),f=v;continue}for(m=[],p=[];r!==null&&r!==v;)(o??=new Set).add(r),p.push(r),r=r.next;if(r===null)continue}(v.f&ie)===0&&m.push(v),f=v,r=v.next}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(Tr(or(U.done)),e.outrogroups?.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||o!==void 0){var S=[];if(o!==void 0)for(v of o)(v.f&Ot)===0&&S.push(v);for(;r!==null;)(r.f&Ot)===0&&r!==e.fallback&&S.push(r),r=r.next;var z=S.length;if(z>0){var O=n===0?t:null;Is(e,S,O)}}}function Rs(e,a,t,s,i,n,l,r){var o=(l&gn)!==0?(l&yn)===0?St(t,!1,!1):de(t):null,f=(l&bn)!==0?de(i):null;return{v:o,i:f,e:Bt(()=>(n(a,o??t,f??i,r),()=>{e.delete(s)}))}}function Me(e,a,t){if(e.nodes)for(var s=e.nodes.start,i=e.nodes.end,n=a&&(a.f&ie)===0?a.nodes.start:t;s!==null;){var l=Ze(s);if(n.before(s),s===i)return;s=l}}function re(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}const li=[...` 	
\r\f \v\uFEFF`];function Ds(e,a,t){var s=e==null?"":""+e;if(a&&(s=s?s+" "+a:a),t){for(var i in t)if(t[i])s=s?s+" "+i:i;else if(s.length)for(var n=i.length,l=0;(l=s.indexOf(i,l))>=0;){var r=l+n;(l===0||li.includes(s[l-1]))&&(r===s.length||li.includes(s[r]))?s=(l===0?"":s.substring(0,l))+s.substring(r+1):l=r}}return s===""?null:s}function Os(e,a){return e==null?null:String(e)}function er(e,a,t,s,i,n){var l=e.__className;if(l!==t||l===void 0){var r=Ds(t,s,n);r==null?e.removeAttribute("class"):e.className=r,e.__className=t}else if(n&&i!==n)for(var o in n){var f=!!n[o];(i==null||f!==!!i[o])&&e.classList.toggle(o,f)}return n}function en(e,a,t,s){var i=e.__style;if(i!==a){var n=Os(a);n==null?e.removeAttribute("style"):e.style.cssText=n,e.__style=a}return s}const Ls=Symbol("is custom element"),Ps=Symbol("is html");function Ir(e,a){var t=nn(e);t.value===(t.value=a??void 0)||e.value===a&&(a!==0||e.nodeName!=="PROGRESS")||(e.value=a??"")}function rn(e,a,t,s){var i=nn(e);i[a]!==(i[a]=t)&&(a==="loading"&&(e[On]=t),t==null?e.removeAttribute(a):typeof t!="string"&&zs(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function nn(e){return e.__attributes??={[Ls]:e.nodeName.includes("-"),[Ps]:e.namespaceURI===An}}var ui=new Map;function zs(e){var a=e.getAttribute("is")||e.nodeName,t=ui.get(a);if(t)return t;ui.set(a,t=[]);for(var s,i=e,n=Element.prototype;n!==i;){s=wi(i);for(var l in s)s[l].set&&t.push(l);i=Dr(i)}return t}function qr(e=!1){const a=vt,t=a.l.u;if(!t)return;let s=()=>$t(a.s);if(e){let i=0,n={};const l=Br(()=>{let r=!1;const o=a.s;for(const f in o)o[f]!==n[f]&&(n[f]=o[f],r=!0);return r&&i++,i});s=()=>P(l)}t.b.length&&as(()=>{fi(a,s),wr(t.b)}),Ar(()=>{const i=ct(()=>t.m.map(Cn));return()=>{for(const n of i)typeof n=="function"&&n()}}),t.a.length&&Ar(()=>{fi(a,s),wr(t.a)})}function fi(e,a){if(e.l.s)for(const t of e.l.s)P(t);a()}function sn(e,a,t){if(e==null)return a(void 0),xe;const s=ct(()=>e.subscribe(a,t));return s.unsubscribe?()=>s.unsubscribe():s}const ge=[];function Bs(e,a=xe){let t=null;const s=new Set;function i(r){if(Ni(e,r)&&(e=r,t)){const o=!ge.length;for(const f of s)f[1](),ge.push(f,e);if(o){for(let f=0;f<ge.length;f+=2)ge[f][0](ge[f+1]);ge.length=0}}}function n(r){i(r(e))}function l(r,o=xe){const f=[r,o];return s.add(f),s.size===1&&(t=a(i,n)||xe),r(e),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:i,update:n,subscribe:l}}function Fs(e){let a;return sn(e,t=>a=t)(),a}let Ye=!1,Cr=Symbol();function Ms(e,a,t){const s=t[a]??={store:null,source:St(void 0),unsubscribe:xe};if(s.store!==e&&!(Cr in t))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=xe;else{var i=!0;s.unsubscribe=sn(e,n=>{i?s.source.v=n:lt(s.source,n)}),i=!1}return e&&Cr in t?Fs(e):P(s.source)}function Us(){const e={};function a(){Ur(()=>{for(var t in e)e[t].unsubscribe();yi(e,Cr,{enumerable:!1,value:!0})})}return[e,a]}function js(e){var a=Ye;try{return Ye=!1,[e(),Ye]}finally{Ye=a}}function je(e,a,t,s){var i=!Re||(t&wn)!==0,n=(t&xn)!==0,l=s,r=!0,o=()=>(r&&(r=!1,l=s),l),f;{var m=ke in e||Dn in e;f=Ee(e,a)?.set??(m&&a in e?w=>e[a]=w:void 0)}var p,_=!1;[p,_]=js(()=>e[a]),p===void 0&&s!==void 0&&(p=o(),f&&(i&&Mn(),f(p)));var h;if(i?h=()=>{var w=e[a];return w===void 0?o():(r=!0,w)}:h=()=>{var w=e[a];return w!==void 0&&(l=void 0),w===void 0?l:w},i&&(t&En)===0)return h;if(f){var v=e.$$legacy;return(function(w,k){return arguments.length>0?((!i||!k||v||_)&&f(k?h():w),w):h()})}var d=!1,b=Se(()=>(d=!1,h()));P(b);var g=dt;return(function(w,k){if(arguments.length>0){const A=k?P(b):i&&n?we(w):w;return lt(b,A),d=!0,l!==void 0&&(l=A),w}return _e&&d||(g.f&Xt)!==0?b.v:P(b)})}function Ws(e){if(!e)return{left:"",pivot:"",right:""};const a=e.length;let t=0;return a===1?t=0:a>=2&&a<=5?t=1:a>=6&&a<=9?t=2:a>=10&&a<=13?t=3:t=4,t>=a&&(t=Math.floor((a-1)/2)),{left:e.slice(0,t),pivot:e[t],right:e.slice(t+1)}}function Ke(e,a){if(!e)return 0;const t=e.trim().split(/\s+/).filter(i=>i.length>0).length;if(t===0)return 0;let s=Math.round(a/t*1e3);return s/=10,s=s>100?100:s,Number(s.toFixed(1))}function hi(e){return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"})}const ci=1e9,di=1e6,pi=1e3;function Je(e){return e<0&&(e=0),e>=ci?(e/ci).toFixed(1).replace(/\.0$/,"")+"B":e>=di?(e/di).toFixed(1).replace(/\.0$/,"")+"M":e>=pi?(e/pi).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}const Qe=e=>e.trim().split(/\s+/).filter(Boolean).length;class Gs{constructor(a){this.words=[],this.idx=0,this.wpm=500,this.isPlaying=!1,this.onUpdate=a}load(a){this.stop(),this.words=a.trim().split(/\s+/).filter(t=>t.length>0),this.idx=0,this.update()}play(){this.words.length===0||this.idx>=this.words.length||(this.isPlaying=!0,this.update(),this.tick())}pause(){this.isPlaying=!1,clearTimeout(this.timer),this.update()}toggle(){this.isPlaying?this.pause():this.play()}stop(){this.isPlaying=!1,clearTimeout(this.timer),this.update()}seek(a){const t=this.idx+a;this.idx=Math.max(0,Math.min(t,this.words.length-1)),this.update()}setWpm(a){this.wpm=a,this.update()}get currentWord(){return this.words[this.idx]||""}get progress(){return this.words.length===0?0:this.idx/this.words.length*100}tick(){if(!this.isPlaying)return;if(this.idx>=this.words.length){this.pause();return}const a=this.words[this.idx],t=this.calculateDelay(a);this.timer=setTimeout(()=>{this.idx++,this.idx>=this.words.length?this.pause():(this.update(),this.tick())},t)}calculateDelay(a){const t=6e4/this.wpm;return a.endsWith(".")||a.endsWith("!")||a.endsWith("?")?t*2.2:a.endsWith(",")||a.endsWith(";")||a.endsWith(":")?t*1.5:a.length>8?t*1.2:t}update(){this.onUpdate()}}var Hs=ae('<div class="overlay p-fix f-col j-ct al-ct svelte-1r2p9dp"><div class="reader p-rel w-100 f j-ct al-ct rx10 svelte-1r2p9dp"><div class="guides h-100 p-abs f-col j-bw o-33 svelte-1r2p9dp"><div class="top svelte-1r2p9dp"></div> <div class="bottom svelte-1r2p9dp"></div></div> <div class="word-display fw5 f svelte-1r2p9dp"><span class="part d-ib left tr svelte-1r2p9dp"> </span> <span class="part d-ib pivot tc fw7 svelte-1r2p9dp"> </span> <span class="part d-ib right tl svelte-1r2p9dp"> </span></div></div> <div class="hud p-abs w-100 p20 f-col al-ct g10 svelte-1r2p9dp"><div class="progress-bar w-100 rx2 svelte-1r2p9dp"><div class="fill h-100 svelte-1r2p9dp"></div></div> <div class="f al-ct g20"><span class="info svelte-1r2p9dp"> </span> <button class="icon-btn svelte-1r2p9dp"> </button> <input type="range" min="100" max="1000" step="50" class="mini-slider svelte-1r2p9dp"/> <span class="info svelte-1r2p9dp"> </span> <button class="icon-btn svelte-1r2p9dp">✕ Exit</button></div></div></div>');function Zs(e,a){fr(a,!1);const t=St();let s=je(a,"text",8,""),i=je(a,"startIndex",8,0),n=je(a,"wpm",8,300);const l=As();let r=St(new Gs(()=>lt(r,P(r))));dr(()=>{P(r).setWpm(n()),P(r).load(s()),P(r).seek(i()),P(r).play()});function o(tt){const F=+tt.target.value;P(r).setWpm(F)}function f(){P(r).stop(),l("close",{index:P(r).idx,wpm:P(r).wpm})}function m(tt){tt.code==="Space"&&(tt.preventDefault(),P(r).toggle()),tt.code==="Escape"&&f(),tt.code==="ArrowLeft"&&P(r).seek(-20),tt.code==="ArrowRight"&&P(r).seek(20),tt.code==="ArrowUp"&&(tt.shiftKey?P(r).setWpm(P(r).wpm+500):P(r).setWpm(P(r).wpm+50)),tt.code==="ArrowDown"&&(tt.shiftKey?P(r).setWpm(P(r).wpm-500):P(r).setWpm(P(r).wpm-50))}ks(()=>P(r).stop()),jr(()=>P(r),()=>{lt(t,Ws(P(r).currentWord))}),Wr(),qr();var p=Hs();Dt("keydown",Sr,m);var _=st(p),h=_t(st(_),2),v=st(h),d=st(v),b=_t(v,2),g=st(b),w=_t(b,2),k=st(w),A=_t(_,2),S=st(A),z=st(S),O=_t(S,2),U=st(O),R=st(U),B=_t(U,2),K=st(B),E=_t(B,2),D=_t(E,2),c=st(D),j=_t(D,2);oe(()=>{Nt(d,(P(t),ct(()=>P(t).left))),Nt(g,(P(t),ct(()=>P(t).pivot))),Nt(k,(P(t),ct(()=>P(t).right))),en(z,`width: ${P(r),ct(()=>P(r).progress)??""}%`),Nt(R,`${P(r),ct(()=>P(r).idx)??""} / ${P(r),ct(()=>P(r).words.length)??""} words`),Nt(K,(P(r),ct(()=>P(r).isPlaying?"⏸ Pause":"▶ Play"))),Ir(E,(P(r),ct(()=>P(r).wpm))),Nt(c,`${P(r),ct(()=>P(r).wpm)??""} WPM`)}),Dt("click",B,()=>P(r).toggle()),Dt("input",E,o),Dt("click",j,f),zt(e,p),hr()}const _i=e=>encodeURIComponent(e.replaceAll(" ","-").toLowerCase()),vi=e=>{let a=5381;for(let t=0;t<e.length;t++)a=(a<<5)+a+e.charCodeAt(t),a|=0;return Math.abs(a).toString(16)};class mi{constructor({text:a="",rate:t=1,voiceName:s=""}={}){this._text="",this._rate=1,this.voiceName="Samantha (English (United States))",this.sentences=[],this.currentIndex=0,this.speaking=!1,this.progress=0,this.listeners=new Set,this.playpause=()=>{this.speaking?this.cancel():this.speak()},this.jumpTo=i=>{this.currentIndex=i,this.cancel(),this.speak()},this._text=a,this._rate=t,s&&(this.voiceName=s),this.processText()}get text(){return this._text}set text(a){this._text!==a&&(this._text=a,this.processText(),this.cancel(),this.currentIndex=0,this.updateState())}get rate(){return this._rate}set rate(a){this._rate=a}static parse(a){try{const t=typeof a=="string"?JSON.parse(a):a;return{text:t?.text||t||"",current:t?.current||0}}catch{return{text:String(a),current:0}}}processText(){if(!this._text){this.sentences=[];return}this.sentences=this._text.match(/[^.!?]+[.!?]*/g)?.map(a=>a.trim()).filter(a=>a)||[this._text]}onChange(a){return this.listeners.add(a),()=>this.listeners.delete(a)}updateState(){this.progress=this.sentences.length?this.currentIndex/this.sentences.length*100:0,this.listeners.forEach(a=>a())}speak(){this.cancel(!1),this.speaking=!0,this.loop(),this.updateState()}loop(){if(!this.speaking)return;if(this.currentIndex>=this.sentences.length){this.speaking=!1,this.currentIndex=0,this.updateState();return}const a=this.sentences[this.currentIndex],t=new SpeechSynthesisUtterance(a);t.rate=this._rate;const i=speechSynthesis.getVoices().find(n=>n.name===this.voiceName);i&&(t.voice=i),t.onend=()=>{this.speaking&&(this.currentIndex++,this.updateState(),this.loop())},t.onerror=()=>{this.speaking=!1,this.updateState()},speechSynthesis.speak(t)}cancel(a=!0){this.speaking=!1,speechSynthesis.cancel(),a&&this.updateState()}}var qs=ae("<div> </div>"),$s=ae('<div class="overlay p-fix f-col j-ct al-ct svelte-42e9et"><div class="reader p-rel w-100 f j-ct al-ct rx10 svelte-42e9et"><div class="lyrics-window tc w-100 svelte-42e9et"></div></div> <div class="hud p-abs w-100 p20 f-col al-ct g10 svelte-42e9et"><div class="progress-bar w-100 rx2 svelte-42e9et"><div class="fill h-100 svelte-42e9et"></div></div> <div class="f al-ct g20"><span class="info svelte-42e9et"> </span> <button class="icon-btn svelte-42e9et"> </button> <span class="info svelte-42e9et"> </span></div></div></div>');function Vs(e,a){fr(a,!1);let t=je(a,"data",8,""),s=mi.parse(t()),i=s.text,n=St(s.current),l=St(1.2),r=St(new mi({text:i,rate:P(l),voiceName:"Samantha (English (United States))"})),o=St(P(r).sentences),f=St(P(r).speaking),m=St(P(r).progress);const p=P(r).onChange(()=>{lt(o,P(r).sentences),lt(n,P(r).currentIndex),lt(f,P(r).speaking),lt(m,P(r).progress);const R=_i(P(o)[P(n)||0]||"");localStorage.setItem(`tts-progress-${vi(i||"")}`,JSON.stringify({line:R,rate:P(l)})),setTimeout(()=>{document.getElementById("line-"+P(n))?.scrollIntoView({behavior:"smooth",block:"center"})},0)});dr(()=>{speechSynthesis.onvoiceschanged=()=>{};const R=localStorage.getItem(`tts-progress-${vi(i||"")}`);if(R){const K=JSON.parse(R);let E=0;K.line&&(E=P(o).findIndex(D=>_i(D)===K.line),E<=0&&(E=0)),typeof K.rate=="number"&&lt(l,Math.max(.25,Math.min(2,K.rate))),gr(r,P(r).currentIndex=E),lt(n,E)}const B=document.getElementById("line-"+P(r).currentIndex);return B&&B.scrollIntoView({behavior:"smooth",block:"center"}),()=>{p?.(),P(r).cancel()}}),jr(()=>P(l),()=>{gr(r,P(r).text=i),gr(r,P(r).rate=P(l))}),Wr(),qr();var _=$s(),h=st(_),v=st(h);tn(v,5,()=>P(o),Ts,(R,B,K)=>{var E=qs();rn(E,"id","line-"+K);let D;var c=st(E);oe(()=>{D=er(E,1,"line o-66 svelte-42e9et",null,D,{active:K===P(n)}),Nt(c,P(B))}),Dt("click",E,()=>P(r).jumpTo(K)),zt(R,E)});var d=_t(h,2),b=st(d),g=st(b),w=_t(b,2),k=st(w),A=st(k),S=_t(k,2),z=st(S),O=_t(S,2),U=st(O);oe(R=>{en(g,`width: ${P(m)??""}%`),Nt(A,`${P(n)+1} / ${P(o),ct(()=>P(o).length)??""} lines`),Nt(z,P(f)?"⏸ Pause":"▶ Play"),Nt(U,`${R??""}x`)},[()=>(P(l),ct(()=>P(l).toFixed(2)))]),Dt("click",S,function(...R){P(r).playpause?.apply(this,R)}),zt(e,_),hr()}class Xs{constructor(){this.dbName="rsvp-notes-db",this.storeName="notes",this.version=1,this.db=null}async initialize(a="Welcome to RSVP Reader! Paste your text here."){this.db=await this.openDB(),await this.count()===0&&await this.create(a)}openDB(){return new Promise((a,t)=>{const s=indexedDB.open(this.dbName,this.version);s.onupgradeneeded=i=>{const n=i.target.result;n.objectStoreNames.contains(this.storeName)||n.createObjectStore(this.storeName,{keyPath:"id"})},s.onsuccess=()=>a(s.result),s.onerror=()=>t(s.error)})}getStore(a){if(!this.db)throw new Error("DB uninitialized. initialize() first.");return this.db.transaction(this.storeName,a).objectStore(this.storeName)}async create(a=""){const t={id:crypto.randomUUID(),text:a,lastModified:Date.now(),savedIndex:0};return new Promise((s,i)=>{const l=this.getStore("readwrite").add(t);l.onsuccess=()=>s(t),l.onerror=()=>i(l.error)})}async update(a,t,s){const i=await this.get(a);if(!i)return;const n={...i,text:t,lastModified:Date.now(),savedIndex:s??i.savedIndex};return new Promise((l,r)=>{const f=this.getStore("readwrite").put(n);f.onsuccess=()=>l(),f.onerror=()=>r(f.error)})}async delete(a){return new Promise((t,s)=>{const n=this.getStore("readwrite").delete(a);n.onsuccess=()=>t(),n.onerror=()=>s(n.error)})}async getAll(){return new Promise((a,t)=>{const i=this.getStore("readonly").getAll();i.onsuccess=()=>{const n=i.result;n.sort((l,r)=>r.lastModified-l.lastModified),a(n)},i.onerror=()=>t(i.error)})}async get(a){return new Promise((t,s)=>{const n=this.getStore("readonly").get(a);n.onsuccess=()=>t(n.result||null),n.onerror=()=>s(n.error)})}async setSavedIndex(a,t){const s=await this.get(a);s&&await this.update(a,s.text,t)}async count(){return new Promise((a,t)=>{const i=this.getStore("readonly").count();i.onsuccess=()=>a(i.result),i.onerror=()=>t(i.error)})}}function tr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var br={exports:{}};var gi;function Ys(){return gi||(gi=1,(function(e,a){(function(t){e.exports=t()})(function(){return(function t(s,i,n){function l(f,m){if(!i[f]){if(!s[f]){var p=typeof tr=="function"&&tr;if(!m&&p)return p(f,!0);if(r)return r(f,!0);var _=new Error("Cannot find module '"+f+"'");throw _.code="MODULE_NOT_FOUND",_}var h=i[f]={exports:{}};s[f][0].call(h.exports,function(v){var d=s[f][1][v];return l(d||v)},h,h.exports,t,s,i,n)}return i[f].exports}for(var r=typeof tr=="function"&&tr,o=0;o<n.length;o++)l(n[o]);return l})({1:[function(t,s,i){var n=t("./utils"),l=t("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(o){for(var f,m,p,_,h,v,d,b=[],g=0,w=o.length,k=w,A=n.getTypeOf(o)!=="string";g<o.length;)k=w-g,p=A?(f=o[g++],m=g<w?o[g++]:0,g<w?o[g++]:0):(f=o.charCodeAt(g++),m=g<w?o.charCodeAt(g++):0,g<w?o.charCodeAt(g++):0),_=f>>2,h=(3&f)<<4|m>>4,v=1<k?(15&m)<<2|p>>6:64,d=2<k?63&p:64,b.push(r.charAt(_)+r.charAt(h)+r.charAt(v)+r.charAt(d));return b.join("")},i.decode=function(o){var f,m,p,_,h,v,d=0,b=0,g="data:";if(o.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var w,k=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===r.charAt(64)&&k--,o.charAt(o.length-2)===r.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=l.uint8array?new Uint8Array(0|k):new Array(0|k);d<o.length;)f=r.indexOf(o.charAt(d++))<<2|(_=r.indexOf(o.charAt(d++)))>>4,m=(15&_)<<4|(h=r.indexOf(o.charAt(d++)))>>2,p=(3&h)<<6|(v=r.indexOf(o.charAt(d++))),w[b++]=f,h!==64&&(w[b++]=m),v!==64&&(w[b++]=p);return w}},{"./support":30,"./utils":32}],2:[function(t,s,i){var n=t("./external"),l=t("./stream/DataWorker"),r=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function f(m,p,_,h,v){this.compressedSize=m,this.uncompressedSize=p,this.crc32=_,this.compression=h,this.compressedContent=v}f.prototype={getContentWorker:function(){var m=new l(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new l(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,_){return m.pipe(new r).pipe(new o("uncompressedSize")).pipe(p.compressWorker(_)).pipe(new o("compressedSize")).withStreamInfo("compression",p)},s.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,i){var n=t("./utils"),l=(function(){for(var r,o=[],f=0;f<256;f++){r=f;for(var m=0;m<8;m++)r=1&r?3988292384^r>>>1:r>>>1;o[f]=r}return o})();s.exports=function(r,o){return r!==void 0&&r.length?n.getTypeOf(r)!=="string"?(function(f,m,p,_){var h=l,v=_+p;f^=-1;for(var d=_;d<v;d++)f=f>>>8^h[255&(f^m[d])];return-1^f})(0|o,r,r.length,0):(function(f,m,p,_){var h=l,v=_+p;f^=-1;for(var d=_;d<v;d++)f=f>>>8^h[255&(f^m.charCodeAt(d))];return-1^f})(0|o,r,r.length,0):0}},{"./utils":32}],5:[function(t,s,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,s,i){var n=null;n=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:n}},{lie:37}],7:[function(t,s,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),r=t("./utils"),o=t("./stream/GenericWorker"),f=n?"uint8array":"array";function m(p,_){o.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=_,this.meta={}}i.magic="\b\0",r.inherits(m,o),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(f,p.data),!1)},m.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(_){p.push({data:_,meta:p.meta})}},i.compressWorker=function(p){return new m("Deflate",p)},i.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,i){function n(h,v){var d,b="";for(d=0;d<v;d++)b+=String.fromCharCode(255&h),h>>>=8;return b}function l(h,v,d,b,g,w){var k,A,S=h.file,z=h.compression,O=w!==f.utf8encode,U=r.transformTo("string",w(S.name)),R=r.transformTo("string",f.utf8encode(S.name)),B=S.comment,K=r.transformTo("string",w(B)),E=r.transformTo("string",f.utf8encode(B)),D=R.length!==S.name.length,c=E.length!==B.length,j="",tt="",F="",X=S.dir,G=S.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};v&&!d||(Y.crc32=h.crc32,Y.compressedSize=h.compressedSize,Y.uncompressedSize=h.uncompressedSize);var T=0;v&&(T|=8),O||!D&&!c||(T|=2048);var C=0,Q=0;X&&(C|=16),g==="UNIX"?(Q=798,C|=(function(Z,rt){var ht=Z;return Z||(ht=rt?16893:33204),(65535&ht)<<16})(S.unixPermissions,X)):(Q=20,C|=(function(Z){return 63&(Z||0)})(S.dosPermissions)),k=G.getUTCHours(),k<<=6,k|=G.getUTCMinutes(),k<<=5,k|=G.getUTCSeconds()/2,A=G.getUTCFullYear()-1980,A<<=4,A|=G.getUTCMonth()+1,A<<=5,A|=G.getUTCDate(),D&&(tt=n(1,1)+n(m(U),4)+R,j+="up"+n(tt.length,2)+tt),c&&(F=n(1,1)+n(m(K),4)+E,j+="uc"+n(F.length,2)+F);var $="";return $+=`
\0`,$+=n(T,2),$+=z.magic,$+=n(k,2),$+=n(A,2),$+=n(Y.crc32,4),$+=n(Y.compressedSize,4),$+=n(Y.uncompressedSize,4),$+=n(U.length,2),$+=n(j.length,2),{fileRecord:p.LOCAL_FILE_HEADER+$+U+j,dirRecord:p.CENTRAL_FILE_HEADER+n(Q,2)+$+n(K.length,2)+"\0\0\0\0"+n(C,4)+n(b,4)+U+j+K}}var r=t("../utils"),o=t("../stream/GenericWorker"),f=t("../utf8"),m=t("../crc32"),p=t("../signature");function _(h,v,d,b){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=d,this.encodeFileName=b,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(_,o),_.prototype.push=function(h){var v=h.meta.percent||0,d=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,o.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:d?(v+100*(d-b-1))/d:100}}))},_.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var v=this.streamFiles&&!h.file.dir;if(v){var d=l(h,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(h){this.accumulate=!1;var v=this.streamFiles&&!h.file.dir,d=l(h,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),v)this.push({data:(function(b){return p.DATA_DESCRIPTOR+n(b.crc32,4)+n(b.compressedSize,4)+n(b.uncompressedSize,4)})(h),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var h=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var d=this.bytesWritten-h,b=(function(g,w,k,A,S){var z=r.transformTo("string",S(A));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(g,2)+n(g,2)+n(w,4)+n(k,4)+n(z.length,2)+z})(this.dirRecords.length,d,h,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(h){this._sources.push(h);var v=this;return h.on("data",function(d){v.processChunk(d)}),h.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),h.on("error",function(d){v.error(d)}),this},_.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(h){var v=this._sources;if(!o.prototype.error.call(this,h))return!1;for(var d=0;d<v.length;d++)try{v[d].error(h)}catch{}return!0},_.prototype.lock=function(){o.prototype.lock.call(this);for(var h=this._sources,v=0;v<h.length;v++)h[v].lock()},s.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,i){var n=t("../compressions"),l=t("./ZipFileWorker");i.generateWorker=function(r,o,f){var m=new l(o.streamFiles,f,o.platform,o.encodeFileName),p=0;try{r.forEach(function(_,h){p++;var v=(function(w,k){var A=w||k,S=n[A];if(!S)throw new Error(A+" is not a valid compression method !");return S})(h.options.compression,o.compression),d=h.options.compressionOptions||o.compressionOptions||{},b=h.dir,g=h.date;h._compressWorker(v,d).withStreamInfo("file",{name:_,dir:b,date:g,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new n;for(var r in this)typeof this[r]!="function"&&(l[r]=this[r]);return l}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(l,r){return new n().loadAsync(l,r)},n.external=t("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,i){var n=t("./utils"),l=t("./external"),r=t("./utf8"),o=t("./zipEntries"),f=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function p(_){return new l.Promise(function(h,v){var d=_.decompressed.getContentWorker().pipe(new f);d.on("error",function(b){v(b)}).on("end",function(){d.streamInfo.crc32!==_.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}s.exports=function(_,h){var v=this;return h=n.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),m.isNode&&m.isStream(_)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",_,!0,h.optimizedBinaryString,h.base64).then(function(d){var b=new o(h);return b.load(d),b}).then(function(d){var b=[l.Promise.resolve(d)],g=d.files;if(h.checkCRC32)for(var w=0;w<g.length;w++)b.push(p(g[w]));return l.Promise.all(b)}).then(function(d){for(var b=d.shift(),g=b.files,w=0;w<g.length;w++){var k=g[w],A=k.fileNameStr,S=n.resolve(k.fileNameStr);v.file(S,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:h.createFolders}),k.dir||(v.file(S).unsafeOriginalName=A)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,i){var n=t("../utils"),l=t("../stream/GenericWorker");function r(o,f){l.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(f)}n.inherits(r,l),r.prototype._bindStream=function(o){var f=this;(this._stream=o).pause(),o.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},r.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,i){var n=t("readable-stream").Readable;function l(r,o,f){n.call(this,o),this._helper=r;var m=this;r.on("data",function(p,_){m.push(p)||m._helper.pause(),f&&f(_)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}t("../utils").inherits(l,n),l.prototype._read=function(){this._helper.resume()},s.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,s,i){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,l);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,l)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var l=new Buffer(n);return l.fill(0),l},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,s,i){function n(S,z,O){var U,R=r.getTypeOf(z),B=r.extend(O||{},m);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(S=g(S)),B.createFolders&&(U=b(S))&&w.call(this,U,!0);var K=R==="string"&&B.binary===!1&&B.base64===!1;O&&O.binary!==void 0||(B.binary=!K),(z instanceof p&&z.uncompressedSize===0||B.dir||!z||z.length===0)&&(B.base64=!1,B.binary=!0,z="",B.compression="STORE",R="string");var E=null;E=z instanceof p||z instanceof o?z:v.isNode&&v.isStream(z)?new d(S,z):r.prepareContent(S,z,B.binary,B.optimizedBinaryString,B.base64);var D=new _(S,E,B);this.files[S]=D}var l=t("./utf8"),r=t("./utils"),o=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),m=t("./defaults"),p=t("./compressedObject"),_=t("./zipObject"),h=t("./generate"),v=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),b=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var z=S.lastIndexOf("/");return 0<z?S.substring(0,z):""},g=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},w=function(S,z){return z=z!==void 0?z:m.createFolders,S=g(S),this.files[S]||n.call(this,S,null,{dir:!0,createFolders:z}),this.files[S]};function k(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var z,O,U;for(z in this.files)U=this.files[z],(O=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&S(O,U)},filter:function(S){var z=[];return this.forEach(function(O,U){S(O,U)&&z.push(U)}),z},file:function(S,z,O){if(arguments.length!==1)return S=this.root+S,n.call(this,S,z,O),this;if(k(S)){var U=S;return this.filter(function(B,K){return!K.dir&&U.test(B)})}var R=this.files[this.root+S];return R&&!R.dir?R:null},folder:function(S){if(!S)return this;if(k(S))return this.filter(function(R,B){return B.dir&&S.test(R)});var z=this.root+S,O=w.call(this,z),U=this.clone();return U.root=O.name,U},remove:function(S){S=this.root+S;var z=this.files[S];if(z||(S.slice(-1)!=="/"&&(S+="/"),z=this.files[S]),z&&!z.dir)delete this.files[S];else for(var O=this.filter(function(R,B){return B.name.slice(0,S.length)===S}),U=0;U<O.length;U++)delete this.files[O[U].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var z,O={};try{if((O=r.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");r.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var U=O.comment||this.comment||"";z=h.generateWorker(this,O,U)}catch(R){(z=new o("error")).error(R)}return new f(z,O.type||"string",O.mimeType)},generateAsync:function(S,z){return this.generateInternalStream(S).accumulate(z)},generateNodeStream:function(S,z){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(z)}};s.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,i){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,i){var n=t("./DataReader");function l(r){n.call(this,r);for(var o=0;o<this.data.length;o++)r[o]=255&r[o]}t("../utils").inherits(l,n),l.prototype.byteAt=function(r){return this.data[this.zero+r]},l.prototype.lastIndexOfSignature=function(r){for(var o=r.charCodeAt(0),f=r.charCodeAt(1),m=r.charCodeAt(2),p=r.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===o&&this.data[_+1]===f&&this.data[_+2]===m&&this.data[_+3]===p)return _-this.zero;return-1},l.prototype.readAndCheckSignature=function(r){var o=r.charCodeAt(0),f=r.charCodeAt(1),m=r.charCodeAt(2),p=r.charCodeAt(3),_=this.readData(4);return o===_[0]&&f===_[1]&&m===_[2]&&p===_[3]},l.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},s.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,s,i){var n=t("../utils");function l(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var o,f=0;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)f=(f<<8)+this.byteAt(o);return this.index+=r,f},readString:function(r){return n.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},s.exports=l},{"../utils":32}],19:[function(t,s,i){var n=t("./Uint8ArrayReader");function l(r){n.call(this,r)}t("../utils").inherits(l,n),l.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},s.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,i){var n=t("./DataReader");function l(r){n.call(this,r)}t("../utils").inherits(l,n),l.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},l.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},l.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},l.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},s.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,s,i){var n=t("./ArrayReader");function l(r){n.call(this,r)}t("../utils").inherits(l,n),l.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},s.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,i){var n=t("../utils"),l=t("../support"),r=t("./ArrayReader"),o=t("./StringReader"),f=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");s.exports=function(p){var _=n.getTypeOf(p);return n.checkSupport(_),_!=="string"||l.uint8array?_==="nodebuffer"?new f(p):l.uint8array?new m(n.transformTo("uint8array",p)):new r(n.transformTo("array",p)):new o(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,i){var n=t("./GenericWorker"),l=t("../utils");function r(o){n.call(this,"ConvertWorker to "+o),this.destType=o}l.inherits(r,n),r.prototype.processChunk=function(o){this.push({data:l.transformTo(this.destType,o.data),meta:o.meta})},s.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,i){var n=t("./GenericWorker"),l=t("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(r,n),r.prototype.processChunk=function(o){this.streamInfo.crc32=l(o.data,this.streamInfo.crc32||0),this.push(o)},s.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,i){var n=t("../utils"),l=t("./GenericWorker");function r(o){l.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}n.inherits(r,l),r.prototype.processChunk=function(o){if(o){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+o.data.length}l.prototype.processChunk.call(this,o)},s.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,i){var n=t("../utils"),l=t("./GenericWorker");function r(o){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=n.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}n.inherits(r,l),r.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,f);break;case"uint8array":o=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":o=this.data.slice(this.index,f)}return this.index=f,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,i){function n(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,r){return this._listeners[l].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,r){if(this._listeners[l])for(var o=0;o<this._listeners[l].length;o++)this._listeners[l][o].call(this,r)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var r=this;return l.on("data",function(o){r.processChunk(o)}),l.on("end",function(){r.end()}),l.on("error",function(o){r.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,r){return this.extraStreamInfo[l]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},s.exports=n},{}],29:[function(t,s,i){var n=t("../utils"),l=t("./ConvertWorker"),r=t("./GenericWorker"),o=t("../base64"),f=t("../support"),m=t("../external"),p=null;if(f.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(v,d){return new m.Promise(function(b,g){var w=[],k=v._internalType,A=v._outputType,S=v._mimeType;v.on("data",function(z,O){w.push(z),d&&d(O)}).on("error",function(z){w=[],g(z)}).on("end",function(){try{var z=(function(O,U,R){switch(O){case"blob":return n.newBlob(n.transformTo("arraybuffer",U),R);case"base64":return o.encode(U);default:return n.transformTo(O,U)}})(A,(function(O,U){var R,B=0,K=null,E=0;for(R=0;R<U.length;R++)E+=U[R].length;switch(O){case"string":return U.join("");case"array":return Array.prototype.concat.apply([],U);case"uint8array":for(K=new Uint8Array(E),R=0;R<U.length;R++)K.set(U[R],B),B+=U[R].length;return K;case"nodebuffer":return Buffer.concat(U);default:throw new Error("concat : unsupported type '"+O+"'")}})(k,w),S);b(z)}catch(O){g(O)}w=[]}).resume()})}function h(v,d,b){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=b,n.checkSupport(g),this._worker=v.pipe(new l(g)),v.lock()}catch(w){this._worker=new r("error"),this._worker.error(w)}}h.prototype={accumulate:function(v){return _(this,v)},on:function(v,d){var b=this;return v==="data"?this._worker.on(v,function(g){d.call(b,g.data,g.meta)}):this._worker.on(v,function(){n.delay(d,arguments,b)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},v)}},s.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(n),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,i){for(var n=t("./utils"),l=t("./support"),r=t("./nodejsUtils"),o=t("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){o.call(this,"utf-8 decode"),this.leftOver=null}function _(){o.call(this,"utf-8 encode")}i.utf8encode=function(h){return l.nodebuffer?r.newBufferFrom(h,"utf-8"):(function(v){var d,b,g,w,k,A=v.length,S=0;for(w=0;w<A;w++)(64512&(b=v.charCodeAt(w)))==55296&&w+1<A&&(64512&(g=v.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),w++),S+=b<128?1:b<2048?2:b<65536?3:4;for(d=l.uint8array?new Uint8Array(S):new Array(S),w=k=0;k<S;w++)(64512&(b=v.charCodeAt(w)))==55296&&w+1<A&&(64512&(g=v.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),w++),b<128?d[k++]=b:(b<2048?d[k++]=192|b>>>6:(b<65536?d[k++]=224|b>>>12:(d[k++]=240|b>>>18,d[k++]=128|b>>>12&63),d[k++]=128|b>>>6&63),d[k++]=128|63&b);return d})(h)},i.utf8decode=function(h){return l.nodebuffer?n.transformTo("nodebuffer",h).toString("utf-8"):(function(v){var d,b,g,w,k=v.length,A=new Array(2*k);for(d=b=0;d<k;)if((g=v[d++])<128)A[b++]=g;else if(4<(w=f[g]))A[b++]=65533,d+=w-1;else{for(g&=w===2?31:w===3?15:7;1<w&&d<k;)g=g<<6|63&v[d++],w--;1<w?A[b++]=65533:g<65536?A[b++]=g:(g-=65536,A[b++]=55296|g>>10&1023,A[b++]=56320|1023&g)}return A.length!==b&&(A.subarray?A=A.subarray(0,b):A.length=b),n.applyFromCharCode(A)})(h=n.transformTo(l.uint8array?"uint8array":"array",h))},n.inherits(p,o),p.prototype.processChunk=function(h){var v=n.transformTo(l.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var d=v;(v=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),v.set(d,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=(function(w,k){var A;for((k=k||w.length)>w.length&&(k=w.length),A=k-1;0<=A&&(192&w[A])==128;)A--;return A<0||A===0?k:A+f[w[A]]>k?A:k})(v),g=v;b!==v.length&&(l.uint8array?(g=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(g=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:i.utf8decode(g),meta:h.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,n.inherits(_,o),_.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,i){var n=t("./support"),l=t("./base64"),r=t("./nodejsUtils"),o=t("./external");function f(d){return d}function m(d,b){for(var g=0;g<d.length;++g)b[g]=255&d.charCodeAt(g);return b}t("setimmediate"),i.newBlob=function(d,b){i.checkSupport("blob");try{return new Blob([d],{type:b})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(d,b,g){var w=[],k=0,A=d.length;if(A<=g)return String.fromCharCode.apply(null,d);for(;k<A;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,d.slice(k,Math.min(k+g,A)))):w.push(String.fromCharCode.apply(null,d.subarray(k,Math.min(k+g,A)))),k+=g;return w.join("")},stringifyByChar:function(d){for(var b="",g=0;g<d.length;g++)b+=String.fromCharCode(d[g]);return b},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}})()}};function _(d){var b=65536,g=i.getTypeOf(d),w=!0;if(g==="uint8array"?w=p.applyCanBeUsed.uint8array:g==="nodebuffer"&&(w=p.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return p.stringifyByChunk(d,g,b)}catch{b=Math.floor(b/2)}return p.stringifyByChar(d)}function h(d,b){for(var g=0;g<d.length;g++)b[g]=d[g];return b}i.applyFromCharCode=_;var v={};v.string={string:f,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return v.string.uint8array(d).buffer},uint8array:function(d){return m(d,new Uint8Array(d.length))},nodebuffer:function(d){return m(d,r.allocBuffer(d.length))}},v.array={string:_,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return r.newBufferFrom(d)}},v.arraybuffer={string:function(d){return _(new Uint8Array(d))},array:function(d){return h(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return r.newBufferFrom(new Uint8Array(d))}},v.uint8array={string:_,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return r.newBufferFrom(d)}},v.nodebuffer={string:_,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return v.nodebuffer.uint8array(d).buffer},uint8array:function(d){return h(d,new Uint8Array(d.length))},nodebuffer:f},i.transformTo=function(d,b){if(b=b||"",!d)return b;i.checkSupport(d);var g=i.getTypeOf(b);return v[g][d](b)},i.resolve=function(d){for(var b=d.split("/"),g=[],w=0;w<b.length;w++){var k=b[w];k==="."||k===""&&w!==0&&w!==b.length-1||(k===".."?g.pop():g.push(k))}return g.join("/")},i.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":n.nodebuffer&&r.isBuffer(d)?"nodebuffer":n.uint8array&&d instanceof Uint8Array?"uint8array":n.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(d){if(!n[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(d){var b,g,w="";for(g=0;g<(d||"").length;g++)w+="\\x"+((b=d.charCodeAt(g))<16?"0":"")+b.toString(16).toUpperCase();return w},i.delay=function(d,b,g){setImmediate(function(){d.apply(g||null,b||[])})},i.inherits=function(d,b){function g(){}g.prototype=b.prototype,d.prototype=new g},i.extend=function(){var d,b,g={};for(d=0;d<arguments.length;d++)for(b in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],b)&&g[b]===void 0&&(g[b]=arguments[d][b]);return g},i.prepareContent=function(d,b,g,w,k){return o.Promise.resolve(b).then(function(A){return n.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new o.Promise(function(S,z){var O=new FileReader;O.onload=function(U){S(U.target.result)},O.onerror=function(U){z(U.target.error)},O.readAsArrayBuffer(A)}):A}).then(function(A){var S=i.getTypeOf(A);return S?(S==="arraybuffer"?A=i.transformTo("uint8array",A):S==="string"&&(k?A=l.decode(A):g&&w!==!0&&(A=(function(z){return m(z,n.uint8array?new Uint8Array(z.length):new Array(z.length))})(A))),A):o.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,i){var n=t("./reader/readerFor"),l=t("./utils"),r=t("./signature"),o=t("./zipEntry"),f=t("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(_)+", expected "+l.pretty(p)+")")}},isSignature:function(p,_){var h=this.reader.index;this.reader.setIndex(p);var v=this.reader.readString(4)===_;return this.reader.setIndex(h),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),_=f.uint8array?"uint8array":"array",h=l.transformTo(_,p);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,_,h,v=this.zip64EndOfCentralSize-44;0<v;)p=this.reader.readInt(2),_=this.reader.readInt(4),h=this.reader.readData(_),this.zip64ExtensibleData[p]={id:p,length:_,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,_;for(p=0;p<this.files.length;p++)_=this.files[p],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(p=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var _=p;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var v=_-h;if(0<v)this.isSignature(_,r.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(p){this.reader=n(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,i){var n=t("./reader/readerFor"),l=t("./utils"),r=t("./compressedObject"),o=t("./crc32"),f=t("./utf8"),m=t("./compressions"),p=t("./support");function _(h,v){this.options=h,this.loadOptions=v}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var v,d;if(h.skip(22),this.fileNameLength=h.readInt(2),d=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=(function(b){for(var g in m)if(Object.prototype.hasOwnProperty.call(m,g)&&m[g].magic===b)return m[g];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,v,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var v=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(v),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=n(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var v,d,b,g=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<g;)v=h.readInt(2),d=h.readInt(2),b=h.readData(d),this.extraFields[v]={id:v,length:d,value:b};h.setIndex(g)},handleUTF8:function(){var h=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var d=l.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var g=l.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var v=n(h.value);return v.readInt(1)!==1||o(this.fileName)!==v.readInt(4)?null:f.utf8decode(v.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var v=n(h.value);return v.readInt(1)!==1||o(this.fileComment)!==v.readInt(4)?null:f.utf8decode(v.readData(h.length-5))}return null}},s.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,i){function n(v,d,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=d,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var l=t("./stream/StreamHelper"),r=t("./stream/DataWorker"),o=t("./utf8"),f=t("./compressedObject"),m=t("./stream/GenericWorker");n.prototype={internalStream:function(v){var d=null,b="string";try{if(!v)throw new Error("No output type specified.");var g=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),d=this._decompressWorker();var w=!this._dataBinary;w&&!g&&(d=d.pipe(new o.Utf8EncodeWorker)),!w&&g&&(d=d.pipe(new o.Utf8DecodeWorker))}catch(k){(d=new m("error")).error(k)}return new l(d,b,"")},async:function(v,d){return this.internalStream(v).accumulate(d)},nodeStream:function(v,d){return this.internalStream(v||"nodebuffer").toNodejsStream(d)},_compressWorker:function(v,d){if(this._data instanceof f&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new o.Utf8EncodeWorker)),f.createWorkerFrom(b,v,d)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new r(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<p.length;h++)n.prototype[p[h]]=_;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,i){(function(n){var l,r,o=n.MutationObserver||n.WebKitMutationObserver;if(o){var f=0,m=new o(v),p=n.document.createTextNode("");m.observe(p,{characterData:!0}),l=function(){p.data=f=++f%2}}else if(n.setImmediate||n.MessageChannel===void 0)l="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var d=n.document.createElement("script");d.onreadystatechange=function(){v(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},n.document.documentElement.appendChild(d)}:function(){setTimeout(v,0)};else{var _=new n.MessageChannel;_.port1.onmessage=v,l=function(){_.port2.postMessage(0)}}var h=[];function v(){var d,b;r=!0;for(var g=h.length;g;){for(b=h,h=[],d=-1;++d<g;)b[d]();g=h.length}r=!1}s.exports=function(d){h.push(d)!==1||r||l()}}).call(this,typeof Ve<"u"?Ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,i){var n=t("immediate");function l(){}var r={},o=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,g!==l&&d(this,g)}function _(g,w,k){this.promise=g,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function h(g,w,k){n(function(){var A;try{A=w(k)}catch(S){return r.reject(g,S)}A===g?r.reject(g,new TypeError("Cannot resolve promise with itself")):r.resolve(g,A)})}function v(g){var w=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof w=="function")return function(){w.apply(g,arguments)}}function d(g,w){var k=!1;function A(O){k||(k=!0,r.reject(g,O))}function S(O){k||(k=!0,r.resolve(g,O))}var z=b(function(){w(S,A)});z.status==="error"&&A(z.value)}function b(g,w){var k={};try{k.value=g(w),k.status="success"}catch(A){k.status="error",k.value=A}return k}(s.exports=p).prototype.finally=function(g){if(typeof g!="function")return this;var w=this.constructor;return this.then(function(k){return w.resolve(g()).then(function(){return k})},function(k){return w.resolve(g()).then(function(){throw k})})},p.prototype.catch=function(g){return this.then(null,g)},p.prototype.then=function(g,w){if(typeof g!="function"&&this.state===f||typeof w!="function"&&this.state===o)return this;var k=new this.constructor(l);return this.state!==m?h(k,this.state===f?g:w,this.outcome):this.queue.push(new _(k,g,w)),k},_.prototype.callFulfilled=function(g){r.resolve(this.promise,g)},_.prototype.otherCallFulfilled=function(g){h(this.promise,this.onFulfilled,g)},_.prototype.callRejected=function(g){r.reject(this.promise,g)},_.prototype.otherCallRejected=function(g){h(this.promise,this.onRejected,g)},r.resolve=function(g,w){var k=b(v,w);if(k.status==="error")return r.reject(g,k.value);var A=k.value;if(A)d(g,A);else{g.state=f,g.outcome=w;for(var S=-1,z=g.queue.length;++S<z;)g.queue[S].callFulfilled(w)}return g},r.reject=function(g,w){g.state=o,g.outcome=w;for(var k=-1,A=g.queue.length;++k<A;)g.queue[k].callRejected(w);return g},p.resolve=function(g){return g instanceof this?g:r.resolve(new this(l),g)},p.reject=function(g){var w=new this(l);return r.reject(w,g)},p.all=function(g){var w=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=g.length,A=!1;if(!k)return this.resolve([]);for(var S=new Array(k),z=0,O=-1,U=new this(l);++O<k;)R(g[O],O);return U;function R(B,K){w.resolve(B).then(function(E){S[K]=E,++z!==k||A||(A=!0,r.resolve(U,S))},function(E){A||(A=!0,r.reject(U,E))})}},p.race=function(g){var w=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=g.length,A=!1;if(!k)return this.resolve([]);for(var S=-1,z=new this(l);++S<k;)O=g[S],w.resolve(O).then(function(U){A||(A=!0,r.resolve(z,U))},function(U){A||(A=!0,r.reject(z,U))});var O;return z}},{immediate:36}],38:[function(t,s,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,i){var n=t("./zlib/deflate"),l=t("./utils/common"),r=t("./utils/strings"),o=t("./zlib/messages"),f=t("./zlib/zstream"),m=Object.prototype.toString,p=0,_=-1,h=0,v=8;function d(g){if(!(this instanceof d))return new d(g);this.options=l.assign({level:_,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},g||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var k=n.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(k!==p)throw new Error(o[k]);if(w.header&&n.deflateSetHeader(this.strm,w.header),w.dictionary){var A;if(A=typeof w.dictionary=="string"?r.string2buf(w.dictionary):m.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(k=n.deflateSetDictionary(this.strm,A))!==p)throw new Error(o[k]);this._dict_set=!0}}function b(g,w){var k=new d(w);if(k.push(g,!0),k.err)throw k.msg||o[k.err];return k.result}d.prototype.push=function(g,w){var k,A,S=this.strm,z=this.options.chunkSize;if(this.ended)return!1;A=w===~~w?w:w===!0?4:0,typeof g=="string"?S.input=r.string2buf(g):m.call(g)==="[object ArrayBuffer]"?S.input=new Uint8Array(g):S.input=g,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new l.Buf8(z),S.next_out=0,S.avail_out=z),(k=n.deflate(S,A))!==1&&k!==p)return this.onEnd(k),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(l.shrinkBuf(S.output,S.next_out))):this.onData(l.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&k!==1);return A===4?(k=n.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===p):A!==2||(this.onEnd(p),!(S.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=d,i.deflate=b,i.deflateRaw=function(g,w){return(w=w||{}).raw=!0,b(g,w)},i.gzip=function(g,w){return(w=w||{}).gzip=!0,b(g,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,i){var n=t("./zlib/inflate"),l=t("./utils/common"),r=t("./utils/strings"),o=t("./zlib/constants"),f=t("./zlib/messages"),m=t("./zlib/zstream"),p=t("./zlib/gzheader"),_=Object.prototype.toString;function h(d){if(!(this instanceof h))return new h(d);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},d||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||d&&d.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,b.windowBits);if(g!==o.Z_OK)throw new Error(f[g]);this.header=new p,n.inflateGetHeader(this.strm,this.header)}function v(d,b){var g=new h(b);if(g.push(d,!0),g.err)throw g.msg||f[g.err];return g.result}h.prototype.push=function(d,b){var g,w,k,A,S,z,O=this.strm,U=this.options.chunkSize,R=this.options.dictionary,B=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof d=="string"?O.input=r.binstring2buf(d):_.call(d)==="[object ArrayBuffer]"?O.input=new Uint8Array(d):O.input=d,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new l.Buf8(U),O.next_out=0,O.avail_out=U),(g=n.inflate(O,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&R&&(z=typeof R=="string"?r.string2buf(R):_.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,g=n.inflateSetDictionary(this.strm,z)),g===o.Z_BUF_ERROR&&B===!0&&(g=o.Z_OK,B=!1),g!==o.Z_STREAM_END&&g!==o.Z_OK)return this.onEnd(g),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&g!==o.Z_STREAM_END&&(O.avail_in!==0||w!==o.Z_FINISH&&w!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=r.utf8border(O.output,O.next_out),A=O.next_out-k,S=r.buf2string(O.output,k),O.next_out=A,O.avail_out=U-A,A&&l.arraySet(O.output,O.output,k,A,0),this.onData(S)):this.onData(l.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(B=!0)}while((0<O.avail_in||O.avail_out===0)&&g!==o.Z_STREAM_END);return g===o.Z_STREAM_END&&(w=o.Z_FINISH),w===o.Z_FINISH?(g=n.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===o.Z_OK):w!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(O.avail_out=0))},h.prototype.onData=function(d){this.chunks.push(d)},h.prototype.onEnd=function(d){d===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},i.Inflate=h,i.inflate=v,i.inflateRaw=function(d,b){return(b=b||{}).raw=!0,v(d,b)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(o){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(o[p]=m[p])}}return o},i.shrinkBuf=function(o,f){return o.length===f?o:o.subarray?o.subarray(0,f):(o.length=f,o)};var l={arraySet:function(o,f,m,p,_){if(f.subarray&&o.subarray)o.set(f.subarray(m,m+p),_);else for(var h=0;h<p;h++)o[_+h]=f[m+h]},flattenChunks:function(o){var f,m,p,_,h,v;for(f=p=0,m=o.length;f<m;f++)p+=o[f].length;for(v=new Uint8Array(p),f=_=0,m=o.length;f<m;f++)h=o[f],v.set(h,_),_+=h.length;return v}},r={arraySet:function(o,f,m,p,_){for(var h=0;h<p;h++)o[_+h]=f[m+h]},flattenChunks:function(o){return[].concat.apply([],o)}};i.setTyped=function(o){o?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],42:[function(t,s,i){var n=t("./common"),l=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var o=new n.Buf8(256),f=0;f<256;f++)o[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,_){if(_<65537&&(p.subarray&&r||!p.subarray&&l))return String.fromCharCode.apply(null,n.shrinkBuf(p,_));for(var h="",v=0;v<_;v++)h+=String.fromCharCode(p[v]);return h}o[254]=o[254]=1,i.string2buf=function(p){var _,h,v,d,b,g=p.length,w=0;for(d=0;d<g;d++)(64512&(h=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(v=p.charCodeAt(d+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),d++),w+=h<128?1:h<2048?2:h<65536?3:4;for(_=new n.Buf8(w),d=b=0;b<w;d++)(64512&(h=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(v=p.charCodeAt(d+1)))==56320&&(h=65536+(h-55296<<10)+(v-56320),d++),h<128?_[b++]=h:(h<2048?_[b++]=192|h>>>6:(h<65536?_[b++]=224|h>>>12:(_[b++]=240|h>>>18,_[b++]=128|h>>>12&63),_[b++]=128|h>>>6&63),_[b++]=128|63&h);return _},i.buf2binstring=function(p){return m(p,p.length)},i.binstring2buf=function(p){for(var _=new n.Buf8(p.length),h=0,v=_.length;h<v;h++)_[h]=p.charCodeAt(h);return _},i.buf2string=function(p,_){var h,v,d,b,g=_||p.length,w=new Array(2*g);for(h=v=0;h<g;)if((d=p[h++])<128)w[v++]=d;else if(4<(b=o[d]))w[v++]=65533,h+=b-1;else{for(d&=b===2?31:b===3?15:7;1<b&&h<g;)d=d<<6|63&p[h++],b--;1<b?w[v++]=65533:d<65536?w[v++]=d:(d-=65536,w[v++]=55296|d>>10&1023,w[v++]=56320|1023&d)}return m(w,v)},i.utf8border=function(p,_){var h;for((_=_||p.length)>p.length&&(_=p.length),h=_-1;0<=h&&(192&p[h])==128;)h--;return h<0||h===0?_:h+o[p[h]]>_?h:_}},{"./common":41}],43:[function(t,s,i){s.exports=function(n,l,r,o){for(var f=65535&n|0,m=n>>>16&65535|0,p=0;r!==0;){for(r-=p=2e3<r?2e3:r;m=m+(f=f+l[o++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(t,s,i){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,i){var n=(function(){for(var l,r=[],o=0;o<256;o++){l=o;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;r[o]=l}return r})();s.exports=function(l,r,o,f){var m=n,p=f+o;l^=-1;for(var _=f;_<p;_++)l=l>>>8^m[255&(l^r[_])];return-1^l}},{}],46:[function(t,s,i){var n,l=t("../utils/common"),r=t("./trees"),o=t("./adler32"),f=t("./crc32"),m=t("./messages"),p=0,_=4,h=0,v=-2,d=-1,b=4,g=2,w=8,k=9,A=286,S=30,z=19,O=2*A+1,U=15,R=3,B=258,K=B+R+1,E=42,D=113,c=1,j=2,tt=3,F=4;function X(u,M){return u.msg=m[M],M}function G(u){return(u<<1)-(4<u?9:0)}function Y(u){for(var M=u.length;0<=--M;)u[M]=0}function T(u){var M=u.state,L=M.pending;L>u.avail_out&&(L=u.avail_out),L!==0&&(l.arraySet(u.output,M.pending_buf,M.pending_out,L,u.next_out),u.next_out+=L,M.pending_out+=L,u.total_out+=L,u.avail_out-=L,M.pending-=L,M.pending===0&&(M.pending_out=0))}function C(u,M){r._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,M),u.block_start=u.strstart,T(u.strm)}function Q(u,M){u.pending_buf[u.pending++]=M}function $(u,M){u.pending_buf[u.pending++]=M>>>8&255,u.pending_buf[u.pending++]=255&M}function Z(u,M){var L,x,y=u.max_chain_length,N=u.strstart,W=u.prev_length,H=u.nice_match,I=u.strstart>u.w_size-K?u.strstart-(u.w_size-K):0,q=u.window,J=u.w_mask,V=u.prev,et=u.strstart+B,pt=q[N+W-1],ot=q[N+W];u.prev_length>=u.good_match&&(y>>=2),H>u.lookahead&&(H=u.lookahead);do if(q[(L=M)+W]===ot&&q[L+W-1]===pt&&q[L]===q[N]&&q[++L]===q[N+1]){N+=2,L++;do;while(q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&q[++N]===q[++L]&&N<et);if(x=B-(et-N),N=et-B,W<x){if(u.match_start=M,H<=(W=x))break;pt=q[N+W-1],ot=q[N+W]}}while((M=V[M&J])>I&&--y!=0);return W<=u.lookahead?W:u.lookahead}function rt(u){var M,L,x,y,N,W,H,I,q,J,V=u.w_size;do{if(y=u.window_size-u.lookahead-u.strstart,u.strstart>=V+(V-K)){for(l.arraySet(u.window,u.window,V,V,0),u.match_start-=V,u.strstart-=V,u.block_start-=V,M=L=u.hash_size;x=u.head[--M],u.head[M]=V<=x?x-V:0,--L;);for(M=L=V;x=u.prev[--M],u.prev[M]=V<=x?x-V:0,--L;);y+=V}if(u.strm.avail_in===0)break;if(W=u.strm,H=u.window,I=u.strstart+u.lookahead,q=y,J=void 0,J=W.avail_in,q<J&&(J=q),L=J===0?0:(W.avail_in-=J,l.arraySet(H,W.input,W.next_in,J,I),W.state.wrap===1?W.adler=o(W.adler,H,J,I):W.state.wrap===2&&(W.adler=f(W.adler,H,J,I)),W.next_in+=J,W.total_in+=J,J),u.lookahead+=L,u.lookahead+u.insert>=R)for(N=u.strstart-u.insert,u.ins_h=u.window[N],u.ins_h=(u.ins_h<<u.hash_shift^u.window[N+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[N+R-1])&u.hash_mask,u.prev[N&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=N,N++,u.insert--,!(u.lookahead+u.insert<R)););}while(u.lookahead<K&&u.strm.avail_in!==0)}function ht(u,M){for(var L,x;;){if(u.lookahead<K){if(rt(u),u.lookahead<K&&M===p)return c;if(u.lookahead===0)break}if(L=0,u.lookahead>=R&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+R-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),L!==0&&u.strstart-L<=u.w_size-K&&(u.match_length=Z(u,L)),u.match_length>=R)if(x=r._tr_tally(u,u.strstart-u.match_start,u.match_length-R),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=R){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+R-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else x=r._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(x&&(C(u,!1),u.strm.avail_out===0))return c}return u.insert=u.strstart<R-1?u.strstart:R-1,M===_?(C(u,!0),u.strm.avail_out===0?tt:F):u.last_lit&&(C(u,!1),u.strm.avail_out===0)?c:j}function it(u,M){for(var L,x,y;;){if(u.lookahead<K){if(rt(u),u.lookahead<K&&M===p)return c;if(u.lookahead===0)break}if(L=0,u.lookahead>=R&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+R-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=R-1,L!==0&&u.prev_length<u.max_lazy_match&&u.strstart-L<=u.w_size-K&&(u.match_length=Z(u,L),u.match_length<=5&&(u.strategy===1||u.match_length===R&&4096<u.strstart-u.match_start)&&(u.match_length=R-1)),u.prev_length>=R&&u.match_length<=u.prev_length){for(y=u.strstart+u.lookahead-R,x=r._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-R),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=y&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+R-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=R-1,u.strstart++,x&&(C(u,!1),u.strm.avail_out===0))return c}else if(u.match_available){if((x=r._tr_tally(u,0,u.window[u.strstart-1]))&&C(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return c}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(x=r._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<R-1?u.strstart:R-1,M===_?(C(u,!0),u.strm.avail_out===0?tt:F):u.last_lit&&(C(u,!1),u.strm.avail_out===0)?c:j}function nt(u,M,L,x,y){this.good_length=u,this.max_lazy=M,this.nice_length=L,this.max_chain=x,this.func=y}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*O),this.dyn_dtree=new l.Buf16(2*(2*S+1)),this.bl_tree=new l.Buf16(2*(2*z+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(U+1),this.heap=new l.Buf16(2*A+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*A+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(u){var M;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=g,(M=u.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?E:D,u.adler=M.wrap===2?0:1,M.last_flush=p,r._tr_init(M),h):X(u,v)}function bt(u){var M=at(u);return M===h&&(function(L){L.window_size=2*L.w_size,Y(L.head),L.max_lazy_match=n[L.level].max_lazy,L.good_match=n[L.level].good_length,L.nice_match=n[L.level].nice_length,L.max_chain_length=n[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=R-1,L.match_available=0,L.ins_h=0})(u.state),M}function yt(u,M,L,x,y,N){if(!u)return v;var W=1;if(M===d&&(M=6),x<0?(W=0,x=-x):15<x&&(W=2,x-=16),y<1||k<y||L!==w||x<8||15<x||M<0||9<M||N<0||b<N)return X(u,v);x===8&&(x=9);var H=new ut;return(u.state=H).strm=u,H.wrap=W,H.gzhead=null,H.w_bits=x,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=y+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+R-1)/R),H.window=new l.Buf8(2*H.w_size),H.head=new l.Buf16(H.hash_size),H.prev=new l.Buf16(H.w_size),H.lit_bufsize=1<<y+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new l.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=M,H.strategy=N,H.method=L,bt(u)}n=[new nt(0,0,0,0,function(u,M){var L=65535;for(L>u.pending_buf_size-5&&(L=u.pending_buf_size-5);;){if(u.lookahead<=1){if(rt(u),u.lookahead===0&&M===p)return c;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var x=u.block_start+L;if((u.strstart===0||u.strstart>=x)&&(u.lookahead=u.strstart-x,u.strstart=x,C(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-K&&(C(u,!1),u.strm.avail_out===0))return c}return u.insert=0,M===_?(C(u,!0),u.strm.avail_out===0?tt:F):(u.strstart>u.block_start&&(C(u,!1),u.strm.avail_out),c)}),new nt(4,4,8,4,ht),new nt(4,5,16,8,ht),new nt(4,6,32,32,ht),new nt(4,4,16,16,it),new nt(8,16,32,32,it),new nt(8,16,128,128,it),new nt(8,32,128,256,it),new nt(32,128,258,1024,it),new nt(32,258,258,4096,it)],i.deflateInit=function(u,M){return yt(u,M,w,15,8,0)},i.deflateInit2=yt,i.deflateReset=bt,i.deflateResetKeep=at,i.deflateSetHeader=function(u,M){return u&&u.state?u.state.wrap!==2?v:(u.state.gzhead=M,h):v},i.deflate=function(u,M){var L,x,y,N;if(!u||!u.state||5<M||M<0)return u?X(u,v):v;if(x=u.state,!u.output||!u.input&&u.avail_in!==0||x.status===666&&M!==_)return X(u,u.avail_out===0?-5:v);if(x.strm=u,L=x.last_flush,x.last_flush=M,x.status===E)if(x.wrap===2)u.adler=0,Q(x,31),Q(x,139),Q(x,8),x.gzhead?(Q(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),Q(x,255&x.gzhead.time),Q(x,x.gzhead.time>>8&255),Q(x,x.gzhead.time>>16&255),Q(x,x.gzhead.time>>24&255),Q(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),Q(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(Q(x,255&x.gzhead.extra.length),Q(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(u.adler=f(u.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(Q(x,0),Q(x,0),Q(x,0),Q(x,0),Q(x,0),Q(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),Q(x,3),x.status=D);else{var W=w+(x.w_bits-8<<4)<<8;W|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(W|=32),W+=31-W%31,x.status=D,$(x,W),x.strstart!==0&&($(x,u.adler>>>16),$(x,65535&u.adler)),u.adler=1}if(x.status===69)if(x.gzhead.extra){for(y=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),T(u),y=x.pending,x.pending!==x.pending_buf_size));)Q(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){y=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),T(u),y=x.pending,x.pending===x.pending_buf_size)){N=1;break}N=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,Q(x,N)}while(N!==0);x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),N===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){y=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),T(u),y=x.pending,x.pending===x.pending_buf_size)){N=1;break}N=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,Q(x,N)}while(N!==0);x.gzhead.hcrc&&x.pending>y&&(u.adler=f(u.adler,x.pending_buf,x.pending-y,y)),N===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&T(u),x.pending+2<=x.pending_buf_size&&(Q(x,255&u.adler),Q(x,u.adler>>8&255),u.adler=0,x.status=D)):x.status=D),x.pending!==0){if(T(u),u.avail_out===0)return x.last_flush=-1,h}else if(u.avail_in===0&&G(M)<=G(L)&&M!==_)return X(u,-5);if(x.status===666&&u.avail_in!==0)return X(u,-5);if(u.avail_in!==0||x.lookahead!==0||M!==p&&x.status!==666){var H=x.strategy===2?(function(I,q){for(var J;;){if(I.lookahead===0&&(rt(I),I.lookahead===0)){if(q===p)return c;break}if(I.match_length=0,J=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,J&&(C(I,!1),I.strm.avail_out===0))return c}return I.insert=0,q===_?(C(I,!0),I.strm.avail_out===0?tt:F):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?c:j})(x,M):x.strategy===3?(function(I,q){for(var J,V,et,pt,ot=I.window;;){if(I.lookahead<=B){if(rt(I),I.lookahead<=B&&q===p)return c;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=R&&0<I.strstart&&(V=ot[et=I.strstart-1])===ot[++et]&&V===ot[++et]&&V===ot[++et]){pt=I.strstart+B;do;while(V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&V===ot[++et]&&et<pt);I.match_length=B-(pt-et),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=R?(J=r._tr_tally(I,1,I.match_length-R),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(J=r._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),J&&(C(I,!1),I.strm.avail_out===0))return c}return I.insert=0,q===_?(C(I,!0),I.strm.avail_out===0?tt:F):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?c:j})(x,M):n[x.level].func(x,M);if(H!==tt&&H!==F||(x.status=666),H===c||H===tt)return u.avail_out===0&&(x.last_flush=-1),h;if(H===j&&(M===1?r._tr_align(x):M!==5&&(r._tr_stored_block(x,0,0,!1),M===3&&(Y(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),T(u),u.avail_out===0))return x.last_flush=-1,h}return M!==_?h:x.wrap<=0?1:(x.wrap===2?(Q(x,255&u.adler),Q(x,u.adler>>8&255),Q(x,u.adler>>16&255),Q(x,u.adler>>24&255),Q(x,255&u.total_in),Q(x,u.total_in>>8&255),Q(x,u.total_in>>16&255),Q(x,u.total_in>>24&255)):($(x,u.adler>>>16),$(x,65535&u.adler)),T(u),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?h:1)},i.deflateEnd=function(u){var M;return u&&u.state?(M=u.state.status)!==E&&M!==69&&M!==73&&M!==91&&M!==103&&M!==D&&M!==666?X(u,v):(u.state=null,M===D?X(u,-3):h):v},i.deflateSetDictionary=function(u,M){var L,x,y,N,W,H,I,q,J=M.length;if(!u||!u.state||(N=(L=u.state).wrap)===2||N===1&&L.status!==E||L.lookahead)return v;for(N===1&&(u.adler=o(u.adler,M,J,0)),L.wrap=0,J>=L.w_size&&(N===0&&(Y(L.head),L.strstart=0,L.block_start=0,L.insert=0),q=new l.Buf8(L.w_size),l.arraySet(q,M,J-L.w_size,L.w_size,0),M=q,J=L.w_size),W=u.avail_in,H=u.next_in,I=u.input,u.avail_in=J,u.next_in=0,u.input=M,rt(L);L.lookahead>=R;){for(x=L.strstart,y=L.lookahead-(R-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[x+R-1])&L.hash_mask,L.prev[x&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=x,x++,--y;);L.strstart=x,L.lookahead=R-1,rt(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=R-1,L.match_available=0,u.next_in=H,u.input=I,u.avail_in=W,L.wrap=N,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,i){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,i){s.exports=function(n,l){var r,o,f,m,p,_,h,v,d,b,g,w,k,A,S,z,O,U,R,B,K,E,D,c,j;r=n.state,o=n.next_in,c=n.input,f=o+(n.avail_in-5),m=n.next_out,j=n.output,p=m-(l-n.avail_out),_=m+(n.avail_out-257),h=r.dmax,v=r.wsize,d=r.whave,b=r.wnext,g=r.window,w=r.hold,k=r.bits,A=r.lencode,S=r.distcode,z=(1<<r.lenbits)-1,O=(1<<r.distbits)-1;t:do{k<15&&(w+=c[o++]<<k,k+=8,w+=c[o++]<<k,k+=8),U=A[w&z];e:for(;;){if(w>>>=R=U>>>24,k-=R,(R=U>>>16&255)===0)j[m++]=65535&U;else{if(!(16&R)){if((64&R)==0){U=A[(65535&U)+(w&(1<<R)-1)];continue e}if(32&R){r.mode=12;break t}n.msg="invalid literal/length code",r.mode=30;break t}B=65535&U,(R&=15)&&(k<R&&(w+=c[o++]<<k,k+=8),B+=w&(1<<R)-1,w>>>=R,k-=R),k<15&&(w+=c[o++]<<k,k+=8,w+=c[o++]<<k,k+=8),U=S[w&O];r:for(;;){if(w>>>=R=U>>>24,k-=R,!(16&(R=U>>>16&255))){if((64&R)==0){U=S[(65535&U)+(w&(1<<R)-1)];continue r}n.msg="invalid distance code",r.mode=30;break t}if(K=65535&U,k<(R&=15)&&(w+=c[o++]<<k,(k+=8)<R&&(w+=c[o++]<<k,k+=8)),h<(K+=w&(1<<R)-1)){n.msg="invalid distance too far back",r.mode=30;break t}if(w>>>=R,k-=R,(R=m-p)<K){if(d<(R=K-R)&&r.sane){n.msg="invalid distance too far back",r.mode=30;break t}if(D=g,(E=0)===b){if(E+=v-R,R<B){for(B-=R;j[m++]=g[E++],--R;);E=m-K,D=j}}else if(b<R){if(E+=v+b-R,(R-=b)<B){for(B-=R;j[m++]=g[E++],--R;);if(E=0,b<B){for(B-=R=b;j[m++]=g[E++],--R;);E=m-K,D=j}}}else if(E+=b-R,R<B){for(B-=R;j[m++]=g[E++],--R;);E=m-K,D=j}for(;2<B;)j[m++]=D[E++],j[m++]=D[E++],j[m++]=D[E++],B-=3;B&&(j[m++]=D[E++],1<B&&(j[m++]=D[E++]))}else{for(E=m-K;j[m++]=j[E++],j[m++]=j[E++],j[m++]=j[E++],2<(B-=3););B&&(j[m++]=j[E++],1<B&&(j[m++]=j[E++]))}break}}break}}while(o<f&&m<_);o-=B=k>>3,w&=(1<<(k-=B<<3))-1,n.next_in=o,n.next_out=m,n.avail_in=o<f?f-o+5:5-(o-f),n.avail_out=m<_?_-m+257:257-(m-_),r.hold=w,r.bits=k}},{}],49:[function(t,s,i){var n=t("../utils/common"),l=t("./adler32"),r=t("./crc32"),o=t("./inffast"),f=t("./inftrees"),m=1,p=2,_=0,h=-2,v=1,d=852,b=592;function g(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(E){var D;return E&&E.state?(D=E.state,E.total_in=E.total_out=D.total=0,E.msg="",D.wrap&&(E.adler=1&D.wrap),D.mode=v,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new n.Buf32(d),D.distcode=D.distdyn=new n.Buf32(b),D.sane=1,D.back=-1,_):h}function A(E){var D;return E&&E.state?((D=E.state).wsize=0,D.whave=0,D.wnext=0,k(E)):h}function S(E,D){var c,j;return E&&E.state?(j=E.state,D<0?(c=0,D=-D):(c=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?h:(j.window!==null&&j.wbits!==D&&(j.window=null),j.wrap=c,j.wbits=D,A(E))):h}function z(E,D){var c,j;return E?(j=new w,(E.state=j).window=null,(c=S(E,D))!==_&&(E.state=null),c):h}var O,U,R=!0;function B(E){if(R){var D;for(O=new n.Buf32(512),U=new n.Buf32(32),D=0;D<144;)E.lens[D++]=8;for(;D<256;)E.lens[D++]=9;for(;D<280;)E.lens[D++]=7;for(;D<288;)E.lens[D++]=8;for(f(m,E.lens,0,288,O,0,E.work,{bits:9}),D=0;D<32;)E.lens[D++]=5;f(p,E.lens,0,32,U,0,E.work,{bits:5}),R=!1}E.lencode=O,E.lenbits=9,E.distcode=U,E.distbits=5}function K(E,D,c,j){var tt,F=E.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new n.Buf8(F.wsize)),j>=F.wsize?(n.arraySet(F.window,D,c-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(j<(tt=F.wsize-F.wnext)&&(tt=j),n.arraySet(F.window,D,c-j,tt,F.wnext),(j-=tt)?(n.arraySet(F.window,D,c-j,j,0),F.wnext=j,F.whave=F.wsize):(F.wnext+=tt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=tt))),0}i.inflateReset=A,i.inflateReset2=S,i.inflateResetKeep=k,i.inflateInit=function(E){return z(E,15)},i.inflateInit2=z,i.inflate=function(E,D){var c,j,tt,F,X,G,Y,T,C,Q,$,Z,rt,ht,it,nt,ut,at,bt,yt,u,M,L,x,y=0,N=new n.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return h;(c=E.state).mode===12&&(c.mode=13),X=E.next_out,tt=E.output,Y=E.avail_out,F=E.next_in,j=E.input,G=E.avail_in,T=c.hold,C=c.bits,Q=G,$=Y,M=_;t:for(;;)switch(c.mode){case v:if(c.wrap===0){c.mode=13;break}for(;C<16;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(2&c.wrap&&T===35615){N[c.check=0]=255&T,N[1]=T>>>8&255,c.check=r(c.check,N,2,0),C=T=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&T)<<8)+(T>>8))%31){E.msg="incorrect header check",c.mode=30;break}if((15&T)!=8){E.msg="unknown compression method",c.mode=30;break}if(C-=4,u=8+(15&(T>>>=4)),c.wbits===0)c.wbits=u;else if(u>c.wbits){E.msg="invalid window size",c.mode=30;break}c.dmax=1<<u,E.adler=c.check=1,c.mode=512&T?10:12,C=T=0;break;case 2:for(;C<16;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(c.flags=T,(255&c.flags)!=8){E.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){E.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=T>>8&1),512&c.flags&&(N[0]=255&T,N[1]=T>>>8&255,c.check=r(c.check,N,2,0)),C=T=0,c.mode=3;case 3:for(;C<32;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.head&&(c.head.time=T),512&c.flags&&(N[0]=255&T,N[1]=T>>>8&255,N[2]=T>>>16&255,N[3]=T>>>24&255,c.check=r(c.check,N,4,0)),C=T=0,c.mode=4;case 4:for(;C<16;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.head&&(c.head.xflags=255&T,c.head.os=T>>8),512&c.flags&&(N[0]=255&T,N[1]=T>>>8&255,c.check=r(c.check,N,2,0)),C=T=0,c.mode=5;case 5:if(1024&c.flags){for(;C<16;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.length=T,c.head&&(c.head.extra_len=T),512&c.flags&&(N[0]=255&T,N[1]=T>>>8&255,c.check=r(c.check,N,2,0)),C=T=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(G<(Z=c.length)&&(Z=G),Z&&(c.head&&(u=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),n.arraySet(c.head.extra,j,F,Z,u)),512&c.flags&&(c.check=r(c.check,j,Z,F)),G-=Z,F+=Z,c.length-=Z),c.length))break t;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(G===0)break t;for(Z=0;u=j[F+Z++],c.head&&u&&c.length<65536&&(c.head.name+=String.fromCharCode(u)),u&&Z<G;);if(512&c.flags&&(c.check=r(c.check,j,Z,F)),G-=Z,F+=Z,u)break t}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(G===0)break t;for(Z=0;u=j[F+Z++],c.head&&u&&c.length<65536&&(c.head.comment+=String.fromCharCode(u)),u&&Z<G;);if(512&c.flags&&(c.check=r(c.check,j,Z,F)),G-=Z,F+=Z,u)break t}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;C<16;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(T!==(65535&c.check)){E.msg="header crc mismatch",c.mode=30;break}C=T=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),E.adler=c.check=0,c.mode=12;break;case 10:for(;C<32;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}E.adler=c.check=g(T),C=T=0,c.mode=11;case 11:if(c.havedict===0)return E.next_out=X,E.avail_out=Y,E.next_in=F,E.avail_in=G,c.hold=T,c.bits=C,2;E.adler=c.check=1,c.mode=12;case 12:if(D===5||D===6)break t;case 13:if(c.last){T>>>=7&C,C-=7&C,c.mode=27;break}for(;C<3;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}switch(c.last=1&T,C-=1,3&(T>>>=1)){case 0:c.mode=14;break;case 1:if(B(c),c.mode=20,D!==6)break;T>>>=2,C-=2;break t;case 2:c.mode=17;break;case 3:E.msg="invalid block type",c.mode=30}T>>>=2,C-=2;break;case 14:for(T>>>=7&C,C-=7&C;C<32;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if((65535&T)!=(T>>>16^65535)){E.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&T,C=T=0,c.mode=15,D===6)break t;case 15:c.mode=16;case 16:if(Z=c.length){if(G<Z&&(Z=G),Y<Z&&(Z=Y),Z===0)break t;n.arraySet(tt,j,F,Z,X),G-=Z,F+=Z,Y-=Z,X+=Z,c.length-=Z;break}c.mode=12;break;case 17:for(;C<14;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(c.nlen=257+(31&T),T>>>=5,C-=5,c.ndist=1+(31&T),T>>>=5,C-=5,c.ncode=4+(15&T),T>>>=4,C-=4,286<c.nlen||30<c.ndist){E.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;C<3;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.lens[W[c.have++]]=7&T,T>>>=3,C-=3}for(;c.have<19;)c.lens[W[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,L={bits:c.lenbits},M=f(0,c.lens,0,19,c.lencode,0,c.work,L),c.lenbits=L.bits,M){E.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;nt=(y=c.lencode[T&(1<<c.lenbits)-1])>>>16&255,ut=65535&y,!((it=y>>>24)<=C);){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(ut<16)T>>>=it,C-=it,c.lens[c.have++]=ut;else{if(ut===16){for(x=it+2;C<x;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(T>>>=it,C-=it,c.have===0){E.msg="invalid bit length repeat",c.mode=30;break}u=c.lens[c.have-1],Z=3+(3&T),T>>>=2,C-=2}else if(ut===17){for(x=it+3;C<x;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}C-=it,u=0,Z=3+(7&(T>>>=it)),T>>>=3,C-=3}else{for(x=it+7;C<x;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}C-=it,u=0,Z=11+(127&(T>>>=it)),T>>>=7,C-=7}if(c.have+Z>c.nlen+c.ndist){E.msg="invalid bit length repeat",c.mode=30;break}for(;Z--;)c.lens[c.have++]=u}}if(c.mode===30)break;if(c.lens[256]===0){E.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,L={bits:c.lenbits},M=f(m,c.lens,0,c.nlen,c.lencode,0,c.work,L),c.lenbits=L.bits,M){E.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,L={bits:c.distbits},M=f(p,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,L),c.distbits=L.bits,M){E.msg="invalid distances set",c.mode=30;break}if(c.mode=20,D===6)break t;case 20:c.mode=21;case 21:if(6<=G&&258<=Y){E.next_out=X,E.avail_out=Y,E.next_in=F,E.avail_in=G,c.hold=T,c.bits=C,o(E,$),X=E.next_out,tt=E.output,Y=E.avail_out,F=E.next_in,j=E.input,G=E.avail_in,T=c.hold,C=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;nt=(y=c.lencode[T&(1<<c.lenbits)-1])>>>16&255,ut=65535&y,!((it=y>>>24)<=C);){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(nt&&(240&nt)==0){for(at=it,bt=nt,yt=ut;nt=(y=c.lencode[yt+((T&(1<<at+bt)-1)>>at)])>>>16&255,ut=65535&y,!(at+(it=y>>>24)<=C);){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}T>>>=at,C-=at,c.back+=at}if(T>>>=it,C-=it,c.back+=it,c.length=ut,nt===0){c.mode=26;break}if(32&nt){c.back=-1,c.mode=12;break}if(64&nt){E.msg="invalid literal/length code",c.mode=30;break}c.extra=15&nt,c.mode=22;case 22:if(c.extra){for(x=c.extra;C<x;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.length+=T&(1<<c.extra)-1,T>>>=c.extra,C-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;nt=(y=c.distcode[T&(1<<c.distbits)-1])>>>16&255,ut=65535&y,!((it=y>>>24)<=C);){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if((240&nt)==0){for(at=it,bt=nt,yt=ut;nt=(y=c.distcode[yt+((T&(1<<at+bt)-1)>>at)])>>>16&255,ut=65535&y,!(at+(it=y>>>24)<=C);){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}T>>>=at,C-=at,c.back+=at}if(T>>>=it,C-=it,c.back+=it,64&nt){E.msg="invalid distance code",c.mode=30;break}c.offset=ut,c.extra=15&nt,c.mode=24;case 24:if(c.extra){for(x=c.extra;C<x;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}c.offset+=T&(1<<c.extra)-1,T>>>=c.extra,C-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){E.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(Y===0)break t;if(Z=$-Y,c.offset>Z){if((Z=c.offset-Z)>c.whave&&c.sane){E.msg="invalid distance too far back",c.mode=30;break}rt=Z>c.wnext?(Z-=c.wnext,c.wsize-Z):c.wnext-Z,Z>c.length&&(Z=c.length),ht=c.window}else ht=tt,rt=X-c.offset,Z=c.length;for(Y<Z&&(Z=Y),Y-=Z,c.length-=Z;tt[X++]=ht[rt++],--Z;);c.length===0&&(c.mode=21);break;case 26:if(Y===0)break t;tt[X++]=c.length,Y--,c.mode=21;break;case 27:if(c.wrap){for(;C<32;){if(G===0)break t;G--,T|=j[F++]<<C,C+=8}if($-=Y,E.total_out+=$,c.total+=$,$&&(E.adler=c.check=c.flags?r(c.check,tt,$,X-$):l(c.check,tt,$,X-$)),$=Y,(c.flags?T:g(T))!==c.check){E.msg="incorrect data check",c.mode=30;break}C=T=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;C<32;){if(G===0)break t;G--,T+=j[F++]<<C,C+=8}if(T!==(4294967295&c.total)){E.msg="incorrect length check",c.mode=30;break}C=T=0}c.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;default:return h}return E.next_out=X,E.avail_out=Y,E.next_in=F,E.avail_in=G,c.hold=T,c.bits=C,(c.wsize||$!==E.avail_out&&c.mode<30&&(c.mode<27||D!==4))&&K(E,E.output,E.next_out,$-E.avail_out)?(c.mode=31,-4):(Q-=E.avail_in,$-=E.avail_out,E.total_in+=Q,E.total_out+=$,c.total+=$,c.wrap&&$&&(E.adler=c.check=c.flags?r(c.check,tt,$,E.next_out-$):l(c.check,tt,$,E.next_out-$)),E.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(Q==0&&$===0||D===4)&&M===_&&(M=-5),M)},i.inflateEnd=function(E){if(!E||!E.state)return h;var D=E.state;return D.window&&(D.window=null),E.state=null,_},i.inflateGetHeader=function(E,D){var c;return E&&E.state?(2&(c=E.state).wrap)==0?h:((c.head=D).done=!1,_):h},i.inflateSetDictionary=function(E,D){var c,j=D.length;return E&&E.state?(c=E.state).wrap!==0&&c.mode!==11?h:c.mode===11&&l(1,D,j,0)!==c.check?-3:K(E,D,j,j)?(c.mode=31,-4):(c.havedict=1,_):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,i){var n=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(m,p,_,h,v,d,b,g){var w,k,A,S,z,O,U,R,B,K=g.bits,E=0,D=0,c=0,j=0,tt=0,F=0,X=0,G=0,Y=0,T=0,C=null,Q=0,$=new n.Buf16(16),Z=new n.Buf16(16),rt=null,ht=0;for(E=0;E<=15;E++)$[E]=0;for(D=0;D<h;D++)$[p[_+D]]++;for(tt=K,j=15;1<=j&&$[j]===0;j--);if(j<tt&&(tt=j),j===0)return v[d++]=20971520,v[d++]=20971520,g.bits=1,0;for(c=1;c<j&&$[c]===0;c++);for(tt<c&&(tt=c),E=G=1;E<=15;E++)if(G<<=1,(G-=$[E])<0)return-1;if(0<G&&(m===0||j!==1))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+$[E];for(D=0;D<h;D++)p[_+D]!==0&&(b[Z[p[_+D]]++]=D);if(O=m===0?(C=rt=b,19):m===1?(C=l,Q-=257,rt=r,ht-=257,256):(C=o,rt=f,-1),E=c,z=d,X=D=T=0,A=-1,S=(Y=1<<(F=tt))-1,m===1&&852<Y||m===2&&592<Y)return 1;for(;;){for(U=E-X,B=b[D]<O?(R=0,b[D]):b[D]>O?(R=rt[ht+b[D]],C[Q+b[D]]):(R=96,0),w=1<<E-X,c=k=1<<F;v[z+(T>>X)+(k-=w)]=U<<24|R<<16|B|0,k!==0;);for(w=1<<E-1;T&w;)w>>=1;if(w!==0?(T&=w-1,T+=w):T=0,D++,--$[E]==0){if(E===j)break;E=p[_+b[D]]}if(tt<E&&(T&S)!==A){for(X===0&&(X=tt),z+=c,G=1<<(F=E-X);F+X<j&&!((G-=$[F+X])<=0);)F++,G<<=1;if(Y+=1<<F,m===1&&852<Y||m===2&&592<Y)return 1;v[A=T&S]=tt<<24|F<<16|z-d|0}}return T!==0&&(v[z+T]=E-X<<24|64<<16|0),g.bits=tt,0}},{"../utils/common":41}],51:[function(t,s,i){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,i){var n=t("../utils/common"),l=0,r=1;function o(y){for(var N=y.length;0<=--N;)y[N]=0}var f=0,m=29,p=256,_=p+1+m,h=30,v=19,d=2*_+1,b=15,g=16,w=7,k=256,A=16,S=17,z=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(_+2));o(K);var E=new Array(2*h);o(E);var D=new Array(512);o(D);var c=new Array(256);o(c);var j=new Array(m);o(j);var tt,F,X,G=new Array(h);function Y(y,N,W,H,I){this.static_tree=y,this.extra_bits=N,this.extra_base=W,this.elems=H,this.max_length=I,this.has_stree=y&&y.length}function T(y,N){this.dyn_tree=y,this.max_code=0,this.stat_desc=N}function C(y){return y<256?D[y]:D[256+(y>>>7)]}function Q(y,N){y.pending_buf[y.pending++]=255&N,y.pending_buf[y.pending++]=N>>>8&255}function $(y,N,W){y.bi_valid>g-W?(y.bi_buf|=N<<y.bi_valid&65535,Q(y,y.bi_buf),y.bi_buf=N>>g-y.bi_valid,y.bi_valid+=W-g):(y.bi_buf|=N<<y.bi_valid&65535,y.bi_valid+=W)}function Z(y,N,W){$(y,W[2*N],W[2*N+1])}function rt(y,N){for(var W=0;W|=1&y,y>>>=1,W<<=1,0<--N;);return W>>>1}function ht(y,N,W){var H,I,q=new Array(b+1),J=0;for(H=1;H<=b;H++)q[H]=J=J+W[H-1]<<1;for(I=0;I<=N;I++){var V=y[2*I+1];V!==0&&(y[2*I]=rt(q[V]++,V))}}function it(y){var N;for(N=0;N<_;N++)y.dyn_ltree[2*N]=0;for(N=0;N<h;N++)y.dyn_dtree[2*N]=0;for(N=0;N<v;N++)y.bl_tree[2*N]=0;y.dyn_ltree[2*k]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function nt(y){8<y.bi_valid?Q(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function ut(y,N,W,H){var I=2*N,q=2*W;return y[I]<y[q]||y[I]===y[q]&&H[N]<=H[W]}function at(y,N,W){for(var H=y.heap[W],I=W<<1;I<=y.heap_len&&(I<y.heap_len&&ut(N,y.heap[I+1],y.heap[I],y.depth)&&I++,!ut(N,H,y.heap[I],y.depth));)y.heap[W]=y.heap[I],W=I,I<<=1;y.heap[W]=H}function bt(y,N,W){var H,I,q,J,V=0;if(y.last_lit!==0)for(;H=y.pending_buf[y.d_buf+2*V]<<8|y.pending_buf[y.d_buf+2*V+1],I=y.pending_buf[y.l_buf+V],V++,H===0?Z(y,I,N):(Z(y,(q=c[I])+p+1,N),(J=O[q])!==0&&$(y,I-=j[q],J),Z(y,q=C(--H),W),(J=U[q])!==0&&$(y,H-=G[q],J)),V<y.last_lit;);Z(y,k,N)}function yt(y,N){var W,H,I,q=N.dyn_tree,J=N.stat_desc.static_tree,V=N.stat_desc.has_stree,et=N.stat_desc.elems,pt=-1;for(y.heap_len=0,y.heap_max=d,W=0;W<et;W++)q[2*W]!==0?(y.heap[++y.heap_len]=pt=W,y.depth[W]=0):q[2*W+1]=0;for(;y.heap_len<2;)q[2*(I=y.heap[++y.heap_len]=pt<2?++pt:0)]=1,y.depth[I]=0,y.opt_len--,V&&(y.static_len-=J[2*I+1]);for(N.max_code=pt,W=y.heap_len>>1;1<=W;W--)at(y,q,W);for(I=et;W=y.heap[1],y.heap[1]=y.heap[y.heap_len--],at(y,q,1),H=y.heap[1],y.heap[--y.heap_max]=W,y.heap[--y.heap_max]=H,q[2*I]=q[2*W]+q[2*H],y.depth[I]=(y.depth[W]>=y.depth[H]?y.depth[W]:y.depth[H])+1,q[2*W+1]=q[2*H+1]=I,y.heap[1]=I++,at(y,q,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],(function(ot,Lt){var Le,jt,Pe,gt,qe,pr,qt=Lt.dyn_tree,$r=Lt.max_code,on=Lt.stat_desc.static_tree,ln=Lt.stat_desc.has_stree,un=Lt.stat_desc.extra_bits,Vr=Lt.stat_desc.extra_base,ze=Lt.stat_desc.max_length,$e=0;for(gt=0;gt<=b;gt++)ot.bl_count[gt]=0;for(qt[2*ot.heap[ot.heap_max]+1]=0,Le=ot.heap_max+1;Le<d;Le++)ze<(gt=qt[2*qt[2*(jt=ot.heap[Le])+1]+1]+1)&&(gt=ze,$e++),qt[2*jt+1]=gt,$r<jt||(ot.bl_count[gt]++,qe=0,Vr<=jt&&(qe=un[jt-Vr]),pr=qt[2*jt],ot.opt_len+=pr*(gt+qe),ln&&(ot.static_len+=pr*(on[2*jt+1]+qe)));if($e!==0){do{for(gt=ze-1;ot.bl_count[gt]===0;)gt--;ot.bl_count[gt]--,ot.bl_count[gt+1]+=2,ot.bl_count[ze]--,$e-=2}while(0<$e);for(gt=ze;gt!==0;gt--)for(jt=ot.bl_count[gt];jt!==0;)$r<(Pe=ot.heap[--Le])||(qt[2*Pe+1]!==gt&&(ot.opt_len+=(gt-qt[2*Pe+1])*qt[2*Pe],qt[2*Pe+1]=gt),jt--)}})(y,N),ht(q,pt,y.bl_count)}function u(y,N,W){var H,I,q=-1,J=N[1],V=0,et=7,pt=4;for(J===0&&(et=138,pt=3),N[2*(W+1)+1]=65535,H=0;H<=W;H++)I=J,J=N[2*(H+1)+1],++V<et&&I===J||(V<pt?y.bl_tree[2*I]+=V:I!==0?(I!==q&&y.bl_tree[2*I]++,y.bl_tree[2*A]++):V<=10?y.bl_tree[2*S]++:y.bl_tree[2*z]++,q=I,pt=(V=0)===J?(et=138,3):I===J?(et=6,3):(et=7,4))}function M(y,N,W){var H,I,q=-1,J=N[1],V=0,et=7,pt=4;for(J===0&&(et=138,pt=3),H=0;H<=W;H++)if(I=J,J=N[2*(H+1)+1],!(++V<et&&I===J)){if(V<pt)for(;Z(y,I,y.bl_tree),--V!=0;);else I!==0?(I!==q&&(Z(y,I,y.bl_tree),V--),Z(y,A,y.bl_tree),$(y,V-3,2)):V<=10?(Z(y,S,y.bl_tree),$(y,V-3,3)):(Z(y,z,y.bl_tree),$(y,V-11,7));q=I,pt=(V=0)===J?(et=138,3):I===J?(et=6,3):(et=7,4)}}o(G);var L=!1;function x(y,N,W,H){$(y,(f<<1)+(H?1:0),3),(function(I,q,J,V){nt(I),Q(I,J),Q(I,~J),n.arraySet(I.pending_buf,I.window,q,J,I.pending),I.pending+=J})(y,N,W)}i._tr_init=function(y){L||((function(){var N,W,H,I,q,J=new Array(b+1);for(I=H=0;I<m-1;I++)for(j[I]=H,N=0;N<1<<O[I];N++)c[H++]=I;for(c[H-1]=I,I=q=0;I<16;I++)for(G[I]=q,N=0;N<1<<U[I];N++)D[q++]=I;for(q>>=7;I<h;I++)for(G[I]=q<<7,N=0;N<1<<U[I]-7;N++)D[256+q++]=I;for(W=0;W<=b;W++)J[W]=0;for(N=0;N<=143;)K[2*N+1]=8,N++,J[8]++;for(;N<=255;)K[2*N+1]=9,N++,J[9]++;for(;N<=279;)K[2*N+1]=7,N++,J[7]++;for(;N<=287;)K[2*N+1]=8,N++,J[8]++;for(ht(K,_+1,J),N=0;N<h;N++)E[2*N+1]=5,E[2*N]=rt(N,5);tt=new Y(K,O,p+1,_,b),F=new Y(E,U,0,h,b),X=new Y(new Array(0),R,0,v,w)})(),L=!0),y.l_desc=new T(y.dyn_ltree,tt),y.d_desc=new T(y.dyn_dtree,F),y.bl_desc=new T(y.bl_tree,X),y.bi_buf=0,y.bi_valid=0,it(y)},i._tr_stored_block=x,i._tr_flush_block=function(y,N,W,H){var I,q,J=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=(function(V){var et,pt=4093624447;for(et=0;et<=31;et++,pt>>>=1)if(1&pt&&V.dyn_ltree[2*et]!==0)return l;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return r;for(et=32;et<p;et++)if(V.dyn_ltree[2*et]!==0)return r;return l})(y)),yt(y,y.l_desc),yt(y,y.d_desc),J=(function(V){var et;for(u(V,V.dyn_ltree,V.l_desc.max_code),u(V,V.dyn_dtree,V.d_desc.max_code),yt(V,V.bl_desc),et=v-1;3<=et&&V.bl_tree[2*B[et]+1]===0;et--);return V.opt_len+=3*(et+1)+5+5+4,et})(y),I=y.opt_len+3+7>>>3,(q=y.static_len+3+7>>>3)<=I&&(I=q)):I=q=W+5,W+4<=I&&N!==-1?x(y,N,W,H):y.strategy===4||q===I?($(y,2+(H?1:0),3),bt(y,K,E)):($(y,4+(H?1:0),3),(function(V,et,pt,ot){var Lt;for($(V,et-257,5),$(V,pt-1,5),$(V,ot-4,4),Lt=0;Lt<ot;Lt++)$(V,V.bl_tree[2*B[Lt]+1],3);M(V,V.dyn_ltree,et-1),M(V,V.dyn_dtree,pt-1)})(y,y.l_desc.max_code+1,y.d_desc.max_code+1,J+1),bt(y,y.dyn_ltree,y.dyn_dtree)),it(y),H&&nt(y)},i._tr_tally=function(y,N,W){return y.pending_buf[y.d_buf+2*y.last_lit]=N>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&N,y.pending_buf[y.l_buf+y.last_lit]=255&W,y.last_lit++,N===0?y.dyn_ltree[2*W]++:(y.matches++,N--,y.dyn_ltree[2*(c[W]+p+1)]++,y.dyn_dtree[2*C(N)]++),y.last_lit===y.lit_bufsize-1},i._tr_align=function(y){$(y,2,3),Z(y,k,K),(function(N){N.bi_valid===16?(Q(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)})(y)}},{"../utils/common":41}],53:[function(t,s,i){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,i){(function(n){(function(l,r){if(!l.setImmediate){var o,f,m,p,_=1,h={},v=!1,d=l.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(l);b=b&&b.setTimeout?b:l,o={}.toString.call(l.process)==="[object process]"?function(A){process.nextTick(function(){w(A)})}:(function(){if(l.postMessage&&!l.importScripts){var A=!0,S=l.onmessage;return l.onmessage=function(){A=!1},l.postMessage("","*"),l.onmessage=S,A}})()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",k,!1):l.attachEvent("onmessage",k),function(A){l.postMessage(p+A,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(A){w(A.data)},function(A){m.port2.postMessage(A)}):d&&"onreadystatechange"in d.createElement("script")?(f=d.documentElement,function(A){var S=d.createElement("script");S.onreadystatechange=function(){w(A),S.onreadystatechange=null,f.removeChild(S),S=null},f.appendChild(S)}):function(A){setTimeout(w,0,A)},b.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var S=new Array(arguments.length-1),z=0;z<S.length;z++)S[z]=arguments[z+1];var O={callback:A,args:S};return h[_]=O,o(_),_++},b.clearImmediate=g}function g(A){delete h[A]}function w(A){if(v)setTimeout(w,0,A);else{var S=h[A];if(S){v=!0;try{(function(z){var O=z.callback,U=z.args;switch(U.length){case 0:O();break;case 1:O(U[0]);break;case 2:O(U[0],U[1]);break;case 3:O(U[0],U[1],U[2]);break;default:O.apply(r,U)}})(S)}finally{g(A),v=!1}}}}function k(A){A.source===l&&typeof A.data=="string"&&A.data.indexOf(p)===0&&w(+A.data.slice(p.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Ve<"u"?Ve:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(br)),br.exports}var Ks=Ys();const Js=fn(Ks);async function Qs(e){const a=e.name.toLowerCase();if(console.log("Reading uploaded file:",a),a.endsWith(".txt"))return await e.text();if(a.endsWith(".epub"))return await ta(e);throw new Error("Unsupported file. Not .txt/.epub")}async function ta(e){let a=await e.arrayBuffer();a=await Js.loadAsync(a);const t=a.file("META-INF/container.xml");if(!t)throw new Error("Invalid EPUB: missing container.xml");const s=await t.async("string"),i=ia(s,"rootfile","full-path");if(!i)throw new Error("Invalid EPUB: missing rootfile path");const n=a.file(i);if(!n)throw new Error("Invalid EPUB: missing OPF");const l=await n.async("string"),r={};for(const{id:m,href:p}of ea(l))r[m]=p;const o=i.split("/").slice(0,-1).join("/"),f=[];for(const m of ra(l)){const p=r[m];if(!p)continue;const _=o?`${o}/${p}`:p,h=a.file(_);if(!h)continue;const v=await h.async("string");f.push(na(v))}return f.join(`

`).trim()}function ea(e){const a=[],t=/<item[^>]*id="([^"]+)"[^>]*href="([^"]+)"[^>]*>/g;let s;for(;s=t.exec(e);)a.push({id:s[1],href:s[2]});return a}function ra(e){const a=[],t=/<itemref[^>]*idref="([^"]+)"[^>]*>/g;let s;for(;s=t.exec(e);)a.push(s[1]);return a}function ia(e,a,t){const i=new RegExp(`<${a}[^>]*${t}="([^"]+)"[^>]*>`).exec(e);return i?i[1]:null}function na(e){let a=e.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"");return a=a.replace(/<\s*br\s*\/?>/gi,`
`),a=a.replace(/<\s*\/(p|div|h\d|li)\s*>/gi,`
`),a=a.replace(/<[^>]+>/g,""),a=a.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),a=a.split(/\r?\n/).map(t=>t.trim()).filter(t=>t.length>0).join(`
`),a}function bi(e,a){const t=a-e,i=Math.ceil(t/300);return i<=1?"1 min read":i>60?Math.ceil(i/60)+" hours read":i+" mins read"}var sa=ae('<div><div class="info f-col g5 w-100 svelte-1n46o8q"><span class="title fw6 p5 svelte-1n46o8q"> </span> <div class="meta f j-bw p5 al-ct svelte-1n46o8q"><span class="date svelte-1n46o8q"> </span> <span class="progress fw5 svelte-1n46o8q"> </span></div></div> <button class="delete ptr svelte-1n46o8q">×</button></div> <progress class="w-100 rx5 d-b svelte-1n46o8q"></progress>',1),aa=ae('<aside class="sidebar f-col svelte-1n46o8q"><header class="f p20 j-bw al-ct svelte-1n46o8q"><h2 class="m0">Vegapunk</h2> <div class="add-btn rx5 f svelte-1n46o8q"><button class="svelte-1n46o8q"><svg viewBox="0 0 32 32" class="svelte-1n46o8q"><path d="M27 15 L27 30 2 30 2 5 17 5 M30 6 L26 2 9 19 7 25 13 23 Z M22 6 L26 10 Z M9 19 L13 23 Z"></path></svg></button> <input id="file-upload" type="file" class="d-n" accept=".text/*,.md,.markdown,.txt,.epub"/> <label for="file-upload" class="ptr svelte-1n46o8q"><svg viewBox="-2 -2 40 40" class="svelte-1n46o8q"><path d="M6 2 L6 30 26 30 26 10 18 2 Z M18 2 L18 10 26 10"></path></svg></label></div></header> <div class="list svelte-1n46o8q"></div></aside>'),oa=ae('<div><div> </div> <div class="f g10"><button class="read f al-ct g5 fw6 rx5 svelte-1n46o8q"><!></button> <button class="read f al-ct g5 fw6 rx5 svelte-1n46o8q">Start TTS</button></div></div> <textarea placeholder="Type or paste your content here..." class="svelte-1n46o8q"></textarea>',1),la=ae('<div class="empty f al-ct j-ct h-100 svelte-1n46o8q">No note selected. Create one to begin.</div>'),ua=ae('<main><!> <main class="editor f-col svelte-1n46o8q"><!></main></main> <!>',1);function fa(e,a){fr(a,!1);const t=()=>Ms(_,"$active",s),[s,i]=Us(),n=St();let l=je(a,"frameText",8,""),r=St("none"),o=St(300),f,m=St([]),p=St(null),_=Bs(null),h=St(!1),v=null;dr(async()=>{if(lt(h,!!l()),P(h)){v={id:"frame",text:l(),lastModified:Date.now(),savedIndex:0},_.set(v);return}f=new Xs,await f.initialize(l()),await d(),P(m).length>0&&(lt(p,P(m)[0].id),_.set(P(m)[0])),lt(r,"none")});const d=async()=>lt(m,await f.getAll());async function b(F=""){if(P(h))return;const X=await f.create(F);await d(),lt(p,X.id),_.set(X),lt(r,"none")}async function g(F){if(P(h))return;lt(p,F);const X=await f.get(F);_.set(X),lt(r,"none")}function w(F){const X=F.target.value;if(P(h)){v={...v,text:X,lastModified:Date.now()},_.set(v);return}_.update(Y=>Y?{...Y,text:X,lastModified:Date.now()}:null);let G=null;_.subscribe(Y=>G=Y)(),G&&(lt(m,P(m).map(Y=>Y.id===G.id?{...Y,text:X,lastModified:Date.now()}:Y).sort((Y,T)=>T.lastModified-Y.lastModified)),f.update(G.id,X))}async function k(F,X){P(h)||(F.stopPropagation(),confirm("Delete this note?")&&(await f.delete(X),await d(),P(p)===X&&(lt(p,P(m)[0]?.id||null),_.set(P(p)?await f.get(P(p)):null),lt(r,"none"))))}async function A(F){lt(r,"none");const{index:X,wpm:G}=F.detail;lt(o,G);let Y=null;if(_.subscribe(T=>Y=T)(),P(h)){v={...v,savedIndex:X},_.set(v);return}Y&&(await f.setSavedIndex(Y.id,X),_.update(T=>T?{...T,savedIndex:X}:null),await d())}function S(F){return F.trim().split(`
`)[0]||"New Note"}async function z(F){if(P(h))return;const X=F.target,G=X.files[0];if(!G)return;Qs(G).then(T=>b(T)).then(()=>X.value="")}jr(()=>P(m),()=>{lt(n,P(m))}),Wr(),qr();var O=ua(),U=Be(O),R=st(U);{var B=F=>{var X=aa(),G=st(X),Y=_t(st(G),2),T=st(Y),C=_t(T,2),Q=_t(G,2);tn(Q,5,()=>P(n),$=>$.id,($,Z)=>{var rt=sa(),ht=Be(rt);let it;var nt=st(ht),ut=st(nt),at=st(ut),bt=_t(ut,2),yt=st(bt),u=st(yt),M=_t(yt,2),L=st(M),x=_t(nt,2),y=_t(ht,2);rn(y,"max",100),oe((N,W,H,I)=>{it=er(ht,1,"item ptr f j-bw p10 svelte-1n46o8q",null,it,{active:P(Z).id===P(p)}),Nt(at,N),Nt(u,W),Nt(L,`${H??""}%`),Ir(y,I)},[()=>(P(Z),ct(()=>S(P(Z).text))),()=>($t(hi),P(Z),ct(()=>hi(P(Z).lastModified))),()=>($t(Ke),P(Z),ct(()=>Ke(P(Z).text,P(Z).savedIndex))),()=>($t(Ke),P(Z),ct(()=>Ke(P(Z).text,P(Z).savedIndex)))]),Dt("click",x,N=>k(N,P(Z).id)),Dt("click",ht,()=>g(P(Z).id)),zt($,rt)}),Dt("click",T,b),Dt("change",C,z),zt(F,X)};me(R,F=>{P(h)||F(B)})}var K=_t(R,2),E=st(K);{var D=F=>{var X=oa(),G=Be(X);let Y;var T=st(G),C=st(T),Q=_t(T,2),$=st(Q),Z=st($);{var rt=ut=>{var at=si();oe(()=>Nt(at,`Word ${t(),ct(()=>t()?.savedIndex)??""} ▶`)),zt(ut,at)},ht=ut=>{var at=si("Start RSVP");zt(ut,at)};me(Z,ut=>{t(),ct(()=>t()?.savedIndex>0)?ut(rt):ut(ht,!1)})}var it=_t($,2),nt=_t(G,2);oe((ut,at,bt)=>{Y=er(G,1,"toolbar f al-ct g20 j-bw svelte-1n46o8q",null,Y,{minimal:P(h)}),Nt(C,`${ut??""} / ${at??""} words (${bt??""})`),Ir(nt,(t(),ct(()=>t()?.text)))},[()=>($t(Je),t(),ct(()=>Je(t()?.savedIndex))),()=>($t(Je),$t(Qe),t(),ct(()=>Je(Qe(t()?.text)))),()=>($t(bi),t(),$t(Qe),ct(()=>bi(t()?.savedIndex,Qe(t()?.text))))]),Dt("click",$,()=>lt(r,"reader")),Dt("click",it,()=>lt(r,"tts")),Dt("input",nt,w),zt(F,X)},c=F=>{var X=la();zt(F,X)};me(E,F=>{t()?F(D):F(c,!1)})}var j=_t(U,2);{var tt=F=>{var X=ai(),G=Be(X);{var Y=C=>{{let Q=Se(()=>(t(),ct(()=>t()?.text))),$=Se(()=>(t(),ct(()=>t()?.savedIndex)));Zs(C,{get text(){return P(Q)},get startIndex(){return P($)},get wpm(){return P(o)},$$events:{close:A}})}},T=C=>{var Q=ai(),$=Be(Q);{var Z=rt=>{{let ht=Se(()=>(t(),ct(()=>t()?.text)));Vs(rt,{get data(){return P(ht)}})}};me($,rt=>{P(r)==="tts"&&rt(Z)},!0)}zt(C,Q)};me(G,C=>{P(r)==="reader"?C(Y):C(T,!1)})}zt(F,X)};me(j,F=>{P(r)!=="none"&&t()&&F(tt)})}oe(()=>er(U,1,`f ${P(h)?"minimal":""}`,"svelte-1n46o8q")),zt(e,O),hr(),i()}let an="";if(window.self!==window.top){let e=decodeURIComponent(window.name);const a=new DOMParser().parseFromString(e,"text/html"),t=new pn.Readability(a).parse();t?.textContent?e=t.textContent.trim():e=a.body.innerText,an=e}ys(fa,{target:document.getElementById("app"),props:{frameText:an}});
